{"version":3,"sources":["webpack:///./src/components/messagechild/friend.vue","webpack:///./src/components/messagechild/friend.vue?f970","webpack:///./src/components/messagechild/friend.vue?4977"],"names":["messagechild_friend","Person","Chat","name","data","api","this","GLOBAL","baseURL","activeNames","friendList","isChat","replayList","user_id","imgUrl","to_user_id","other_img","pageIndex","totalPage","userName","components","methods","toPerson","item","index","$router","push","path","query","information","chat","deel","_this2","$confirm","confirmButtonText","cancelButtonText","type","then","deleteFriend","catch","$message","message","_this3","$http","post","token","localStorage","getItem","f_user_id","res","code","splice","setItem","alert","msg","handleChange","val","toTalk","mounted","_this4","_this","page","i","length","userImg","user","head_image","headimage","domain","image_url","family_name","middle_name","created","components_messagechild_friend","render","_vm","_h","$createElement","_c","_self","staticStyle","text-align","on","change","model","value","callback","$$v","expression","attrs","title","_l","margin","border-bottom","$event","totalk","_v","userUrl","isOwer","_e","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/130.dac6601b6b6d8ef4da79.js","sourcesContent":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport Chat from '../../public/chat'\nimport Person from '../../public/person.vue'\n  export default {\n      name: \"friend\",\n    data() {\n      return {\n        api: this.GLOBAL.baseURL,\n        activeNames: ['1'],\n        friendList:[],\n        isChat:false,\n        replayList:[],\n        user_id:'',\n        imgUrl:'',\n        to_user_id:'',\n        other_img:'',\n        pageIndex:1,\n        totalPage:'',\n        userName:''\n      };\n    },\n    components:{\n        Person,\n      Chat\n    },\n    methods: {\n      toPerson(item,index){\n        this.$router.push({\n          path: '/userdata',\n          query: {\n            information: item.to_user_id\n          }\n        })\n      },\n        //取消删除\n      chat(){\n        this.isChat = false\n      },\n        //删除好友\n      deel(item,index){\n        this.$confirm('此操作将删除该好友, 是否继续?', '提示', {\n          confirmButtonText: '确定',\n          cancelButtonText: '取消',\n          type: 'warning'\n        }).then(() => {\n          this.deleteFriend(item,index)\n        }).catch(() => {\n          this.$message({\n            type: 'info',\n            message: '已取消删除'\n          });\n        });\n      },\n      deleteFriend(item,index){\n        this.$http.post(this.api +'/home/Friend/del',{\n          token: localStorage.getItem('token'),\n          f_user_id: item.to_user_id\n        })\n          .then(res=>{\n            if(res.data.code == 1){\n              this.friendList.splice(index,1)\n              this.$message({\n                type: 'success',\n                message: '删除成功!'\n              });\n            }else if(res.data.code == 3){\n              this.$http.post(this.api + '/home/index/token')\n                .then(res=>{\n                  localStorage.setItem('token',res.data.data)\n                  this.deleteFriend(item,index)\n                })\n            }else{\n              alert(res.data.msg)\n            }\n          })\n      },\n      handleChange(val) {\n      },\n      toTalk(item,index){\n        this.to_user_id = item.to_user_id\n        this.other_img = item.imgUrl\n        this.userName = item.name?item.name:'匿名用户'\n        this.isChat = true\n      },\n\n    },\n    mounted() {\n        let _this = this\n      this.$http.post(this.api + '/home/User/get_user',{\n        token: localStorage.getItem('token')\n      })\n        .then(res=>{\n          if(res.data.code == 1){\n            this.user_id = res.data.data[0].user_id\n          }\n        })\n      this.$http.post(_this.api + '/home/Friend/myfriend',{\n        token: localStorage.getItem('token'),\n        page: 1\n      })\n        .then(res=>{\n          if(res.data.code == 1){\n            let data = res.data.data.data\n            for(let i = 0;i<data.length;i++){\n              let userImg = ''\n              if(data[i].user.head_image){\n                userImg = data[i].user.headimage.domain + data[i].user.headimage.image_url\n              }else{\n                userImg = '../../../static/img/static/user.png'\n              }\n              _this.friendList.push({\n                imgUrl: userImg,\n                name: data[i].user.family_name + data[i].user.middle_name + data[i].user.name,\n                to_user_id: data[i].f_user_id\n              })\n            }\n\n          }\n        })\n    },\n    created(){\n        this.imgUrl = localStorage.getItem('userImg')\n    }\n  }\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/messagechild/friend.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticStyle:{\"text-align\":\"left\"}},[_c('el-collapse',{on:{\"change\":_vm.handleChange},model:{value:(_vm.activeNames),callback:function ($$v) {_vm.activeNames=$$v},expression:\"activeNames\"}},[_c('el-collapse-item',{attrs:{\"title\":'我的好友('+_vm.friendList.length+')',\"name\":\"1\"}},_vm._l((_vm.friendList),function(item,index){return _c('div',{staticStyle:{\"margin\":\"20px 0\",\"border-bottom\":\"1px solid #eee\"}},[_c('Person',{attrs:{\"type\":\"6\",\"imgUrl\":item.imgUrl,\"name\":item.name?item.name:'匿名用户'},on:{\"toPerson\":function($event){_vm.toPerson(item,index)},\"totalk\":function($event){_vm.toTalk(item,index)},\"deel\":function($event){_vm.deel(item,index)}}})],1)}))],1),_vm._v(\" \"),(_vm.isChat)?_c('Chat',{attrs:{\"userName\":_vm.userName,\"to_user_id\":_vm.to_user_id,\"other_img\":_vm.other_img,\"userUrl\":_vm.imgUrl,\"isOwer\":_vm.user_id},on:{\"chat\":_vm.chat}}):_vm._e()],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-306b3b56\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vux-loader/src/before-template-compiler-loader.js!./node_modules/vux-loader/src/template-loader.js!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/messagechild/friend.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-306b3b56\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/vux-loader/src/style-loader.js!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./friend.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vux-loader/src/script-loader.js!../../../node_modules/vux-loader/src/script-loader.js!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./friend.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vux-loader/src/script-loader.js!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./friend.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-306b3b56\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vux-loader/src/before-template-compiler-loader.js!../../../node_modules/vux-loader/src/template-loader.js!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./friend.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-306b3b56\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/messagechild/friend.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}