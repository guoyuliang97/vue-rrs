webpackJsonp([59],{AVWw:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("uTVu"),n=a("DjrJ"),i=(n.a,{name:"message",data:function(){return{api:this.GLOBAL.baseURL,sysMesaage:"",fridendMesage:"",Friendsnotice:"",discussNum:"",zanNum:"",all:"",user_id:""}},watch:{all:function(){this.all||s.a.$emit("nore",!1)},sysMesaage:function(){this.sysMesaage||s.a.$emit("alearAll",1)}},components:{Head:n.a},methods:{reload:function(e){this.user_id=e.data.data[0].user_id},toSystemMessage:function(){this.$router.push({path:"/SystemMessage",query:{information:this.user_id,clearNum:this.sysMesaage}})},toFriendsNotice:function(){this.$router.push("/FriendsNotice")},toFriendMessage:function(){this.$router.push("/FriendMessage")},toFriend:function(){this.$router.push("/friend")},getNoread:function(){var e=this;this.$http.post(this.api+"/home/Sysmsg/noread",{token:localStorage.getItem("token")}).then(function(t){if(1==t.data.code){var a=t.data.data;e.sysMesaage=a.sys_count,e.Friendsnotice=a.notice_count,e.fridendMesage=a.chat_count,e.zanNum=a.praise_count,e.discussNum=a.comment_count,e.all=parseInt(a.sys_count)+parseInt(a.notice_count)+parseInt(a.chat_count)+parseInt(a.praise_count)+parseInt(a.comment_count)}else 3==t.data.code?e.$http.post(e.api+"/home/index/token").then(function(t){localStorage.setItem("token",t.data.data),e.getNoread()}):0==t.data.code&&alert(t.data.msg)})},discussMessage:function(){this.all=parseInt(this.all)-parseInt(this.discussNum),this.$router.push("/editevaluation"),this.discussNum=0},zanMessage:function(){this.all=parseInt(this.all)-parseInt(this.zanNum),this.$router.push("/zanMessage"),this.zanNum=0}},mounted:function(){this.getNoread()},created:function(){var e=this;s.a.$on("reduce",function(t){e.sysMesaage=parseInt(e.sysMesaage)-t,e.all=parseInt(e.all)-t}),s.a.$on("reduceNotice",function(t){e.Friendsnotice=parseInt(e.Friendsnotice)-t,e.all=parseInt(e.all)-t}),s.a.$on("friendN",function(t){e.fridendMesage=parseInt(e.fridendMesage)-t,e.all=parseInt(e.all)-t}),s.a.$on("clearAll",function(t){e.all=parseInt(e.all)-parseInt(e.sysMesaage),e.sysMesaage=0})}}),o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-container",[a("el-header",[a("Head",{attrs:{type:"message"},on:{reload:e.reload}})],1),e._v(" "),a("el-container",{staticStyle:{width:"1080px",margin:"50px auto"}},[a("el-aside",{attrs:{width:"200px"}},[a("h2",[e._v("我的消息")]),e._v(" "),a("div",{staticStyle:{"margin-top":"20px"}},[a("el-badge",{staticClass:"item"},[a("el-button",{on:{click:e.toFriend}},[e._v("我的好友")])],1),e._v(" "),a("br"),e._v(" "),a("el-badge",{staticClass:"item",attrs:{value:e.sysMesaage,hidden:!e.sysMesaage,max:99}},[a("el-button",{on:{click:e.toSystemMessage}},[e._v("系统消息")])],1),e._v(" "),a("br"),e._v(" "),a("el-badge",{staticClass:"item",attrs:{value:e.Friendsnotice,hidden:!e.Friendsnotice,max:99}},[a("el-button",{on:{click:e.toFriendsNotice}},[e._v("好友通知")])],1),e._v(" "),a("br"),e._v(" "),a("el-badge",{staticClass:"item",attrs:{value:e.fridendMesage,hidden:!e.fridendMesage,max:99}},[a("el-button",{on:{click:e.toFriendMessage}},[e._v("好友消息")])],1),e._v(" "),a("br"),e._v(" "),a("el-badge",{staticClass:"item",attrs:{value:e.discussNum,hidden:!e.discussNum,max:99}},[a("el-button",{on:{click:e.discussMessage}},[e._v("评价")])],1),e._v(" "),a("br"),e._v(" "),a("el-badge",{staticClass:"item",attrs:{value:e.zanNum,hidden:!e.zanNum,max:99}},[a("el-button",{on:{click:e.zanMessage}},[e._v("赞")])],1)],1)]),e._v(" "),a("el-main",[a("router-view")],1)],1)],1)],1)},staticRenderFns:[]};var r=a("VU/8")(i,o,!1,function(e){a("GqbP")},"data-v-a25b563a",null);t.default=r.exports},GqbP:function(e,t){}});
//# sourceMappingURL=59.13ef4262900847329b09.js.map