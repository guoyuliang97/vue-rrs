{"version":3,"sources":["webpack:///./src/components/message.vue","webpack:///./src/components/message.vue?eea2","webpack:///./src/components/message.vue?e3ab"],"names":["components_message","Head","name","data","api","this","GLOBAL","baseURL","sysMesaage","fridendMesage","Friendsnotice","discussNum","zanNum","all","user_id","watch","Bus","$emit","components","methods","reload","res","toSystemMessage","$router","push","path","query","information","clearNum","toFriendsNotice","toFriendMessage","toFriend","getNoread","_this","$http","post","token","localStorage","getItem","then","code","sys_count","notice_count","chat_count","praise_count","comment_count","parseInt","setItem","alert","msg","discussMessage","zanMessage","mounted","created","_this2","$on","selectortype_template_index_0_src_components_message","render","_vm","_h","$createElement","_c","_self","attrs","type","on","_v","staticStyle","width","margin","margin-top","staticClass","click","value","hidden","max","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/59.13ef4262900847329b09.js","sourcesContent":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport Bus from '../assets/eventBus'\nimport Head from '../public/head.vue'\n  export default {\n      name: \"message\",\n    data(){\n      return{\n        api: this.GLOBAL.baseURL,\n        sysMesaage:'',\n        fridendMesage:'',\n        Friendsnotice:'',\n        discussNum:'',\n        zanNum:'',\n        all:'',\n        user_id:''\n      }\n    },\n    watch:{\n      all:function(){\n        if(!this.all){\n          Bus.$emit('nore',false)\n        }\n      },\n      sysMesaage:function(){\n        if(!this.sysMesaage){\n          Bus.$emit('alearAll',1)\n        }\n\n      }\n    },\n    components:{\n        Head\n    },\n    methods:{\n      reload(res){\n        this.user_id = res.data.data[0].user_id\n      },\n      toSystemMessage(){\n        this.$router.push({\n          path: '/SystemMessage',\n          query:{\n            information: this.user_id,\n            clearNum: this.sysMesaage\n          }\n        })\n      },\n      toFriendsNotice(){\n        this.$router.push('/FriendsNotice')\n      },\n      toFriendMessage(){\n        this.$router.push('/FriendMessage')\n      },\n      toFriend(){\n        this.$router.push('/friend')\n      },\n      getNoread(){\n        this.$http.post(this.api + '/home/Sysmsg/noread',{\n          token:localStorage.getItem('token')\n        })\n          .then(res=>{\n            if(res.data.code == 1){\n              let data = res.data.data\n              this.sysMesaage = data.sys_count\n              this.Friendsnotice = data.notice_count\n              this.fridendMesage = data.chat_count\n              this.zanNum = data.praise_count\n              this.discussNum = data.comment_count\n              this.all = parseInt(data.sys_count) + parseInt(data.notice_count)  + parseInt(data.chat_count)+ parseInt(data.praise_count)+parseInt(data.comment_count)\n            }else if(res.data.code == 3){\n              this.$http.post(this.api + '/home/index/token')\n                .then(res=>{\n                  localStorage.setItem('token',res.data.data)\n                  this.getNoread()\n                })\n            }else if(res.data.code == 0){\n              alert(res.data.msg)\n            }\n          })\n      },\n      discussMessage(){\n        this.all = parseInt(this.all) - parseInt(this.discussNum)\n        this.$router.push('/editevaluation')\n        this.discussNum = 0\n      },\n      zanMessage(){\n        this.all = parseInt(this.all) - parseInt(this.zanNum)\n        this.$router.push('/zanMessage')\n        this.zanNum = 0\n      }\n    },\n    mounted() {\n        this.getNoread()\n    },\n    created(){\n      Bus.$on('reduce',(msg)=>{\n        this.sysMesaage = parseInt(this.sysMesaage) - msg\n        this.all = parseInt(this.all) - msg\n      })\n      Bus.$on('reduceNotice',(msg)=>{\n        this.Friendsnotice = parseInt(this.Friendsnotice) - msg\n        this.all = parseInt(this.all) - msg\n      })\n      Bus.$on('friendN',(msg)=>{\n        this.fridendMesage = parseInt(this.fridendMesage) - msg\n        this.all = parseInt(this.all) - msg\n      })\n      Bus.$on('clearAll',(msg) =>{\n        this.all = parseInt(this.all) - parseInt( this.sysMesaage)\n        this.sysMesaage = 0\n      })\n    }\n  }\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/message.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-container',[_c('el-header',[_c('Head',{attrs:{\"type\":\"message\"},on:{\"reload\":_vm.reload}})],1),_vm._v(\" \"),_c('el-container',{staticStyle:{\"width\":\"1080px\",\"margin\":\"50px auto\"}},[_c('el-aside',{attrs:{\"width\":\"200px\"}},[_c('h2',[_vm._v(\"我的消息\")]),_vm._v(\" \"),_c('div',{staticStyle:{\"margin-top\":\"20px\"}},[_c('el-badge',{staticClass:\"item\"},[_c('el-button',{on:{\"click\":_vm.toFriend}},[_vm._v(\"我的好友\")])],1),_vm._v(\" \"),_c('br'),_vm._v(\" \"),_c('el-badge',{staticClass:\"item\",attrs:{\"value\":_vm.sysMesaage,\"hidden\":_vm.sysMesaage?false:true,\"max\":99}},[_c('el-button',{on:{\"click\":_vm.toSystemMessage}},[_vm._v(\"系统消息\")])],1),_vm._v(\" \"),_c('br'),_vm._v(\" \"),_c('el-badge',{staticClass:\"item\",attrs:{\"value\":_vm.Friendsnotice,\"hidden\":_vm.Friendsnotice?false:true,\"max\":99}},[_c('el-button',{on:{\"click\":_vm.toFriendsNotice}},[_vm._v(\"好友通知\")])],1),_vm._v(\" \"),_c('br'),_vm._v(\" \"),_c('el-badge',{staticClass:\"item\",attrs:{\"value\":_vm.fridendMesage,\"hidden\":_vm.fridendMesage?false:true,\"max\":99}},[_c('el-button',{on:{\"click\":_vm.toFriendMessage}},[_vm._v(\"好友消息\")])],1),_vm._v(\" \"),_c('br'),_vm._v(\" \"),_c('el-badge',{staticClass:\"item\",attrs:{\"value\":_vm.discussNum,\"hidden\":_vm.discussNum?false:true,\"max\":99}},[_c('el-button',{on:{\"click\":_vm.discussMessage}},[_vm._v(\"评价\")])],1),_vm._v(\" \"),_c('br'),_vm._v(\" \"),_c('el-badge',{staticClass:\"item\",attrs:{\"value\":_vm.zanNum,\"hidden\":_vm.zanNum?false:true,\"max\":99}},[_c('el-button',{on:{\"click\":_vm.zanMessage}},[_vm._v(\"赞\")])],1)],1)]),_vm._v(\" \"),_c('el-main',[_c('router-view')],1)],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-a25b563a\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vux-loader/src/before-template-compiler-loader.js!./node_modules/vux-loader/src/template-loader.js!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/message.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-a25b563a\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vux-loader/src/style-loader.js!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./message.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vux-loader/src/script-loader.js!../../node_modules/vux-loader/src/script-loader.js!../../node_modules/vue-loader/lib/selector?type=script&index=0!./message.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vux-loader/src/script-loader.js!../../node_modules/vue-loader/lib/selector?type=script&index=0!./message.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-a25b563a\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vux-loader/src/before-template-compiler-loader.js!../../node_modules/vux-loader/src/template-loader.js!../../node_modules/vue-loader/lib/selector?type=template&index=0!./message.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-a25b563a\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/message.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}