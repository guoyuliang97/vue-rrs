webpackJsonp([114],{YDE2:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("dbwY"),s=(a.default,{data:function(){return{api:this.GLOBAL.baseURL,country:[],province:[],city:[],xian:[],goPlace:"",sampleList:[{txt:"我们会在由校车改造成的漂亮微型住宅中开展活动。 房子里的所有物品均符合可持续发展的环保理念。 这是个值得好好参观和体验的特别去处。"},{txt:"我们应该会先去Kloof Corner Ridge，看看那一路延绵至山上空中索道的壮丽山脊线。 不过，我们也可以根据天气情况和参与者的能力对路线稍作更改。 下山后洗个澡，我们就可以一起去我最爱的餐厅吃顿丰盛的晚餐。"}],sampleIndex:0,leftDate:0,aboutMe:"",isLocal:1,questionList:[],replay:[],local:"",text:"修改",complete:"",str:"",point:[],xianList:[],active_id:""}},components:{City:a.default},methods:{addSample:function(){this.sampleIndex<this.sampleList.length-1&&(this.sampleIndex++,this.leftDate=this.leftDate-370)},delSample:function(){this.sampleIndex>0&&(this.sampleIndex--,this.leftDate=this.leftDate+370)},changeRouter:function(){var t=this;this.xianList.length?this.xian[1]?this.aboutMe?this.goPlace?this.active_id?this.$http.post(this.api+"/home/Activity/save_activity",{token:localStorage.getItem("token"),activity_id:this.active_id,country_id:this.country[0],country:this.country[1],province_id:this.province[0],province:this.province[1],city_id:this.city[0],city:this.city[1],region_id:this.xian[0],region:this.xian[1],set_address:this.aboutMe,go_place:this.goPlace,set_address_lng:this.point[0],set_address_lat:this.point[1],step:10}).then(function(e){1==e.data.code?t.complete?t.$message({type:"success",message:"保存成功！"}):t.$emit("changeRouter",{id:11,router:"activeTime",information:t.active_id,complete:t.complete}):3==e.data.code?t.changeRouter():0==e.data.code&&alert(e.data.msg)}):this.$http.post(this.api+"/home/Activity/save_activity",{token:localStorage.getItem("token"),country_id:this.country[0],country:this.country[1],province_id:this.province[0],province:this.province[1],city_id:this.city[0],city:this.city[1],region_id:this.xian[0],region:this.xian[1],set_address:this.aboutMe,go_place:this.goPlace,set_address_lng:this.point[0],set_address_lat:this.point[1],step:10}).then(function(e){1==e.data.code?(t.$emit("saveId",e.data.data),t.$emit("changeRouter",{id:11,router:"activeTime",information:e.data.data})):3==e.data.code?t.changeRouter():0==e.data.code&&alert(e.data.msg)}):this.$message({type:"info",message:"请完善体验前往哪些地方"}):this.$message({type:"info",message:"请完善参与者集合地点"}):this.$message({type:"info",message:"请完善体验地点"}):this.city[1]?this.aboutMe?this.goPlace?this.active_id?this.$http.post(this.api+"/home/Activity/save_activity",{token:localStorage.getItem("token"),activity_id:this.active_id,country_id:this.country[0],country:this.country[1],province_id:this.province[0],province:this.province[1],city_id:this.city[0],city:this.city[1],region_id:this.xian[0],region:this.xian[1],set_address:this.aboutMe,go_place:this.goPlace,set_address_lng:this.point[0],set_address_lat:this.point[1],step:10}).then(function(e){1==e.data.code?t.complete?t.$message({type:"success",message:"保存成功！"}):t.$emit("changeRouter",{id:11,router:"activeTime",information:t.active_id,complete:t.complete}):3==e.data.code?t.changeRouter():0==e.data.code&&alert(e.data.msg)}):this.$http.post(this.api+"/home/Activity/save_activity",{token:localStorage.getItem("token"),country_id:this.country[0],country:this.country[1],province_id:this.province[0],province:this.province[1],city_id:this.city[0],city:this.city[1],region_id:this.xian[0],region:this.xian[1],set_address:this.aboutMe,go_place:this.goPlace,set_address_lng:this.point[0],set_address_lat:this.point[1],step:10}).then(function(e){1==e.data.code?(t.$emit("saveId",e.data.data),t.$emit("changeRouter",{id:11,router:"activeTime",information:e.data.data})):3==e.data.code?t.changeRouter():0==e.data.code&&alert(e.data.msg)}):this.$message({type:"info",message:"请完善体验前往哪些地方"}):this.$message({type:"info",message:"请完善参与者集合地点"}):this.$message({type:"info",message:"请完善体验地点"})},checkXian:function(t){this.xianList=t},selectCountry:function(t){this.country=t},selectProvince:function(t){this.province=t},selectCity:function(t){this.city=t},selectXian:function(t){this.xian=t},answerAdd:function(t,e){this.replay[e]?this.replay[e]={answer_id:this.replay[e].answer_id,question_id:t.question_id,option_id:t.answer,other:""}:this.replay[e]={question_id:t.question_id,option_id:t.answer,other:""}},changeLocal:function(){1==this.isLocal?(this.isLocal=0,this.text="修改"):(this.isLocal=1,this.text="取消")},createMap:function(){var t=this,e=new BMap.Map("allmap"),i=new BMap.Point(t.point[0],t.point[1]);if(e.centerAndZoom(i,18),t.point[0]||t.point[1]){var a=new BMap.Point(t.point[0],t.point[1]);e.centerAndZoom(a,18);var s=new BMap.Marker(a);e.addOverlay(s)}else{(new BMap.Geolocation).getCurrentPosition(function(t){if(this.getStatus()==BMAP_STATUS_SUCCESS){var i=new BMap.Marker(t.point);e.addOverlay(i),e.panTo(t.point)}else alert("failed"+this.getStatus())},{enableHighAccuracy:!0})}e.addEventListener("click",function(i){console.log(i),t.point=[i.point.lng,i.point.lat],e.clearOverlays();var a=new BMap.Point(i.point.lng,i.point.lat),s=new BMap.Marker(a);e.addOverlay(s),function(e){(new BMap.Geocoder).getLocation(e,function(e){var i=e.addressComponents,a=i.province+i.city+i.district+i.street+i.streetNumber;t.aboutMe=a})}(a)});var n=new BMap.ScaleControl({anchor:BMAP_ANCHOR_TOP_LEFT}),o=new BMap.NavigationControl,c=new BMap.NavigationControl({anchor:BMAP_ANCHOR_TOP_RIGHT,type:BMAP_NAVIGATION_CONTROL_SMALL});e.addControl(n),e.addControl(o),e.addControl(c);var r=new BMap.NavigationControl({anchor:BMAP_ANCHOR_TOP_LEFT,type:BMAP_NAVIGATION_CONTROL_LARGE,enableGeolocation:!0});e.addControl(r);var l,d=new BMap.GeolocationControl;d.addEventListener("locationSuccess",function(t){t.addressComponent.province,t.addressComponent.city,t.addressComponent.district,t.addressComponent.street,t.addressComponent.streetNumber}),d.addEventListener("locationError",function(t){alert(t.message)}),e.addControl(d),new BMap.Autocomplete({input:"suggestId",location:e}).addEventListener("onconfirm",function(i){var a=i.item.value;l=a.province+a.city+a.district+a.street+a.business,t.aboutMe=l,function(){e.clearOverlays();var i=new BMap.LocalSearch(e,{onSearchComplete:function(){var a=i.getResults().getPoi(0).point,s=new BMap.Marker(a);e.centerAndZoom(a,18),e.addOverlay(s);var n=new BMap.InfoWindow("地址："+t.aboutMe,{width:200,height:100,title:"标识地点",enableMessage:!0});s.addEventListener("click",function(){e.openInfoWindow(n,a)}),t.point=[a.lng,a.lat]}});i.search(l)}()})},getQestion:function(){var t=this;this.$http.post(this.api+"/home/Activity/question",{token:localStorage.getItem("token"),activity_id:this.active_id,flag:1}).then(function(e){1==e.data.code?t.questionList=e.data.data:3==e.data.code?t.getQestion():0==e.data.code&&t.$alert(e.data.msg)})},getActives:function(){var t=this;this.$http.post(this.api+"/ActivityE",{token:localStorage.getItem("token"),activity_id:this.active_id,visit:0}).then(function(e){1==e.data.code?(t.goPlace=e.data.data.go_place,t.aboutMe=e.data.data.set_address,t.country.push(e.data.data.country_id,e.data.data.country),t.province.push(e.data.data.province_id,e.data.data.province),t.city.push(e.data.data.city_id,e.data.data.city),t.xian.push(e.data.data.region_id,e.data.data.region),e.data.data.region&&("上海"==t.province[1]||"重庆"==t.province[1]||"北京"==t.province[1]||"天津"==t.province[1]?(t.local=t.country[1]+"  "+t.province[1]+"市 "+t.city[1]+"市 "+t.xian[1]+"区",t.isLocal=0):(t.local=t.country[1]+"  "+t.province[1]+"省 "+t.city[1]+"市 "+t.xian[1],t.isLocal=0)),(e.data.data.set_address_lng||e.data.data.set_address_lat)&&(t.point=[e.data.data.set_address_lng,e.data.data.set_address_lat]),t.createMap(),console.log(t.aboutMe)):3==e.data.code?t.getActives():0==e.data.code&&t.$alert(e.data.msg)})}},created:function(){window.scroll(0,0),this.complete=this.$route.query.complete,this.active_id=this.$route.query.information},mounted:function(){this.active_id&&this.getActives()}}),n={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"exp_con"},[i("p",{staticClass:"title"},[t._v("介绍行程涉及到的所有地点")]),t._v(" "),t._m(0),t._v(" "),t._m(1),t._v(" "),i("div",{staticClass:"title_con"},[t._m(2),t._v(" "),i("div",{staticClass:"advice_sample"},[i("p",{staticClass:"fontweight"},[t._v("示例：")]),t._v(" "),i("p",{staticClass:"fontweight",staticStyle:{color:"#008489"}},[i("span",{staticStyle:{cursor:"pointer"},on:{click:t.delSample}},[i("i",{staticClass:"el-icon-arrow-left"})]),t._v(" "+t._s(t.sampleIndex+1)+"/"+t._s(t.sampleList.length)+" "),i("span",{staticStyle:{cursor:"pointer"},on:{click:t.addSample}},[i("i",{staticClass:"el-icon-arrow-right"})])])]),t._v(" "),i("div",{staticClass:"sample_con"},[i("div",{staticStyle:{width:"1100px",transition:"all .3s linear"},style:{width:"1100px",transition:"all .3s linear",marginLeft:t.leftDate+"px"}},t._l(t.sampleList,function(e){return i("div",{staticClass:"sample_li"},[t._v("\n\t\t\t\t\t\t"+t._s(e.txt)+"\n\t\t\t\t\t")])}))])]),t._v(" "),i("p",{staticClass:"fontweight main_language"},[t._v("介绍行程的体验地点")]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.local,expression:"local"}],staticStyle:{display:"flex","justify-content":"flex-start",margin:"10px 0"}},[i("el-input",{staticStyle:{width:"300px","margin-right":"20px"},attrs:{type:"text",readonly:"readonly"},model:{value:t.local,callback:function(e){t.local=e},expression:"local"}}),t._v(" "),i("el-button",{attrs:{type:"primary",plain:""},on:{click:t.changeLocal}},[t._v(t._s(t.text))])],1),t._v(" "),1==t.isLocal?i("div",[i("City",{staticStyle:{"margin-top":"20px"},attrs:{type:"1"},on:{selectXian:t.selectXian,checkXian:t.checkXian,selectCountry:t.selectCountry,selectProvince:t.selectProvince,selectCity:t.selectCity}})],1):t._e(),t._v(" "),i("p",{staticStyle:{"font-weight":"bold","margin-top":"20px"}},[t._v("集合地点")]),t._v(" "),i("el-input",{staticStyle:{"margin-top":"20px",width:"650px"},attrs:{type:"text",id:"suggestId",placeholder:"集合地点"},model:{value:t.aboutMe,callback:function(e){t.aboutMe=e},expression:"aboutMe"}}),t._v(" "),t._m(3),t._v(" "),i("div",{staticClass:"aboutme_choice"},[i("p",{staticClass:"fontweight"},[t._v("体验期间，参与者将前往哪些地方？")]),t._v(" "),i("el-input",{staticStyle:{"margin-top":"20px",width:"650px"},attrs:{type:"textarea",autosize:{minRows:4},placeholder:"请简单介绍您的行程路线"},model:{value:t.goPlace,callback:function(e){t.goPlace=e},expression:"goPlace"}})],1),t._v(" "),i("div",{staticClass:"exp_btn"},[i("el-button",{attrs:{type:"primary"},on:{click:t.changeRouter}},[t._v(t._s(t.complete?"保存":"下一步"))])],1),t._v(" "),t._m(4)],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("p",{staticClass:"language_txt"},[this._v("您不需要在这里输入地址，房客稍后会收到一封包含详情的电子邮件。 "),e("span",{staticStyle:{color:"#008489",cursor:"pointer"}},[this._v("了解如何开展达人特色体验的更多信息")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",{staticClass:"language_title"},[e("span",{staticClass:"fontweight"},[this._v("小贴士")]),this._v(" "),e("i",{staticClass:"el-icon-arrow-up"})])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"about_advice"},[i("div",[i("p",{staticClass:"fontweight"},[t._v("建议")]),t._v(" "),i("p",{staticClass:"advice_list"},[i("i",{staticClass:"el-icon-plus right"}),t._v(" 提一提你们将到访的、对您个人有特殊意义的地方")]),t._v(" "),i("p",{staticClass:"advice_list"},[i("i",{staticClass:"el-icon-plus right"}),t._v(" 带参与者去只有当地人才知道的地方")])]),t._v(" "),i("div",[i("p",{staticClass:"fontweight"},[t._v("不建议")]),t._v(" "),i("p",{staticClass:"advice_list"},[i("i",{staticClass:"el-icon-close wrong"}),t._v(" 在热门地点举办稀松平常的活动")]),t._v(" "),i("p",{staticClass:"advice_list"},[i("i",{staticClass:"el-icon-close wrong"}),t._v(" 过多地描述场地细节。 向参与者简要说明即可")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticStyle:{"margin-top":"20px"}},[e("p",{staticStyle:{"font-size":"12px",color:"#999999"}},[this._v("请移动地图确认集合地点")]),this._v(" "),e("div",{attrs:{id:"allmap"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",{staticStyle:{"margin-top":"15px"}},[e("span",{staticClass:"fontweight"},[this._v("注意事项:")]),this._v("参与者想找的是在相关领域有特长的体验达人，了解我们对达人"),e("span",{staticStyle:{color:"#008489",cursor:"pointer"}},[this._v("专业知识")]),this._v("水平的介绍。")])}]};var o=i("VU/8")(s,n,!1,function(t){i("Z5zX")},"data-v-4185ed79",null);e.default=o.exports},Z5zX:function(t,e){}});
//# sourceMappingURL=114.100f3fa74837ae31dcf6.js.map