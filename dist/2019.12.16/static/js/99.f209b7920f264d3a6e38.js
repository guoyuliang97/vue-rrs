webpackJsonp([99],{J7Y8:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("a20G"),i=(a("Czhm"),a("DjrJ")),s=a("/nBy"),o=a("mnKu"),r=(i.a,s.a,n.a,{name:"translation",data:function(){return{api:this.GLOBAL.baseURL,colorIndex:"0",list:[],transList:[],activeId:"",languageId:0,isLoading:!1,owerId:"",total:0,index:1}},components:{Head:i.a,Loading:s.a,None:n.a},watch:{languageId:function(){this.gettrans(this.languageId,1)}},methods:{handleCurrentChange:function(t){this.gettrans(this.languageId,t)},changeRouter:function(t,e){e!=this.colorIndex&&(this.colorIndex=e,this.languageId=t.value)},goBack:function(){this.$router.go(-1)},gettrans:function(t,e){var a=this;this.isLoading=!0,this.$http.post(this.api+"/TranslateL",{token:localStorage.getItem("token"),activity_id:this.activeId,language:t,sort:2,page:e}).then(function(t){1==t.data.code?(a.transList=t.data.data.data,a.total=t.data.data.total,a.isLoading=!1):3==t.data.code||alert(t.data.msg)})},addPrase:function(t){var e=this;this.$http.post(this.api+"/home/Comment/praise",{token:localStorage.getItem("token"),flag:2,table_id:t.translate_id,type:t.is_praise?2:1}).then(function(a){1==a.data.code?(t.is_praise?(t.praise_num-=1,e.$message({type:"success",message:"取消点赞！"})):(t.praise_num+=1,e.$message({type:"success",message:"点赞成功！"})),t.is_praise=t.is_praise?0:1):3==a.data.code?e.$http.post(e.api+"/home/index/token").then(function(a){localStorage.setItem("token",a.data.data),e.addPrase(t)}):alert(a.data.msg)})},lookTranslate:function(t){this.$router.push({path:"/publishPage",query:{information:t.activity_id,translate_id:t.translate_id}})},deleteTrans:function(t,e){var a=this;this.$confirm("此操作将删除该翻译, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.deleteT(t,e)}).catch(function(){a.$message({type:"info",message:"已取消删除"})})},deleteT:function(t,e){var a=this;this.$http.post(this.api+"/TranslateD",{token:localStorage.getItem("token"),translate_id:t.translate_id}).then(function(n){1==n.data.code?(a.$message({type:"success",message:"删除成功!"}),a.transList.splice(e,1)):3==n.data.code?a.$http.post(a.api+"/home/index/token").then(function(n){localStorage.setItem("token",n.data.data),a.deleteT(t,e)}):0==n.data.code&&alert(n.data.msg)})},getOwer:function(){var t=this;this.$http.post(this.api+"/home/User/get_user",{token:localStorage.getItem("token")}).then(function(e){1==e.data.code?t.owerId=e.data.data[0].user_id:3==e.data.code?t.$http.post(t.api+"/home/index/token").then(function(e){localStorage.setItem("token",e.data.data),t.getOwer()}):alert(e.data.msg)})}},mounted:function(){this.gettrans(this.languageId,1),this.getOwer()},created:function(){this.activeId=this.$route.query.activeId,this.list=Object(o.a)()}}),l={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Head",{attrs:{type:"translation"}}),t._v(" "),a("div",{staticStyle:{width:"1080px",margin:"106px auto","text-align":"left"}},[a("h4",{staticStyle:{display:"flex","justify-content":"space-between"}},[t._v("活动名称>查看体验翻译"),a("span",{on:{click:t.goBack}},[a("i",{staticClass:"el-icon-arrow-left"}),t._v("返回")])]),t._v(" "),a("div",[a("ul",{staticStyle:{display:"flex","justify-content":"flex-start","border-bottom":"1px solid #eee","margin-top":"40px"}},t._l(t.list,function(e,n){return a("li",{staticStyle:{"font-weight":"bold",width:"80px","margin-right":"10px",padding:"10px 0","text-align":"center","font-size":"12px"},style:{borderBottom:n==t.colorIndex?"2px solid #008489":"none",color:n==t.colorIndex?"#008489":"#000"},on:{click:function(a){t.changeRouter(e,n)}}},[t._v(t._s(e.label))])}))]),t._v(" "),a("Loading",{directives:[{name:"show",rawName:"v-show",value:t.isLoading,expression:"isLoading"}],staticStyle:{position:"fixed",top:"210px",left:"0",right:"0",bottom:"0","background-color":"#fff","text-align":"center"}}),t._v(" "),t._l(t.transList,function(e,n){return a("div",{staticStyle:{padding:"20px 20px","border-bottom":"1px solid #E6E6E6",display:"flex","justify-content":"space-between"}},[a("div",{staticStyle:{display:"flex","justify-content":"flex-start"}},[a("img",{staticStyle:{"border-radius":"50%","margin-top":"15px"},attrs:{src:e.user.head_image?e.user.headimage.domain+e.user.headimage.image_url:"../../../static/img/static/user.png",width:"30px",height:"30px"}}),t._v(" "),a("div",{staticStyle:{"font-size":"12px","margin-top":"15px","margin-left":"10px",width:"500px"}},[a("p",[a("b",[t._v(t._s(e.user.name?e.user.name:"匿名用户"))])]),t._v(" "),a("p",{staticStyle:{overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis"}},[a("span",[t._v(t._s(0==t.languageId?"关于策划人：":1==t.languageId?"Experience the talent show：":"体験の达人chefについて："))]),a("b",[t._v(t._s(e.t_introduce))])]),t._v(" "),a("p",{staticStyle:{overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis"}},[a("span",[t._v(t._s(0==t.languageId?"关于体验内容：":1==t.languageId?"Experience class capacity：":"実験内容："))]),a("b",[t._v(t._s(e.t_descripte))])])])]),t._v(" "),a("div",{staticStyle:{"line-height":"60px","font-size":"12px",cursor:"pointer"}},[a("span",{style:{color:e.is_praise?"#008489":"#000"},on:{click:function(a){t.addPrase(e)}}},[a("i",{staticClass:"iconfont icon-zan"}),t._v(t._s(e.praise_num))]),t._v(" "),a("span",{staticStyle:{"margin-left":"20px",color:"#008489"},on:{click:function(a){t.lookTranslate(e)}}},[t._v("翻译详情")]),t._v(" "),e.user_id==t.owerId?a("span",{staticStyle:{"margin-left":"20px",color:"#008489",cursor:"pointer"},on:{click:function(a){t.deleteTrans(e,n)}}},[t._v("删除")]):t._e()])])}),t._v(" "),t.transList.length?t._e():a("div",[a("None",{attrs:{type:"local"}})],1),t._v(" "),a("div",{staticStyle:{margin:"20px 0"}},[a("el-pagination",{attrs:{"current-page":t.index,"page-size":10,layout:"total, prev, pager, next",total:t.total},on:{"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.index=e}}})],1)],2)],1)},staticRenderFns:[]};var c=a("VU/8")(r,l,!1,function(t){a("Sf5q")},"data-v-52d9af66",null);e.default=c.exports},Sf5q:function(t,e){}});
//# sourceMappingURL=99.f209b7920f264d3a6e38.js.map