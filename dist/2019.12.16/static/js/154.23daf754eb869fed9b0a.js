webpackJsonp([154],{"1Kq1":function(t,e){},"R+On":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("4hmb"),n=i("/nBy"),s=i("DjrJ"),o=i("a20G"),l=i("ZKg9"),c=(s.a,n.a,o.a,l.a,a.a,{name:"fenleiPage",data:function(){return{api:this.GLOBAL.baseURL,date:[],person:"",addClick:!1,otherList:[{person:"成人+",adult:0}],imgUrl:"../../static/img/static/back.jpg",closeIndex:"",price:[0,0],pickerOptions2:{disabledDate:function(t){return t.getTime()<Date.now()-864e5}},AllactiveList:[],KindId:"",total:0,searchList:[],left:0,isLoading:!1,pageIndex:0,editSearch:"",content:"",clickSearch:!1,tiyan:"",personNum:"",allprice:""}},components:{Head:s.a,Loading:n.a,None:o.a,loadingImg:l.a,Detail:a.a},watch:{content:function(){!this.content&&this.clickSearch&&(this.clickSearch=!1,this.goOn())},date:function(){this.date?this.goOn():this.allprice[1]||this.personNum||this.closeIndex||this.tiyan?this.goOn():(this.clickSearch=!1,this.getAll(1))},personNum:function(){this.personNum?this.goOn():this.allprice[1]||this.date||this.closeIndex||this.tiyan?this.goOn():(this.clickSearch=!1,this.getAll(1))},allprice:function(){this.allprice?this.goOn():this.personNum||this.date||this.closeIndex||this.tiyan?this.goOn():(this.clickSearch=!1,this.getAll(1))},closeIndex:function(){this.closeIndex?this.goOn():this.personNum||this.date||this.allprice||this.tiyan?this.goOn():(this.clickSearch=!1,this.getAll(1))},tiyan:function(){this.tiyan?(this.content||(this.editSearch=1==this.tiyan?"户外活动":2==this.tiyan?"少数民族":"本土文化"),this.KindId=this.tiyan,this.goOn()):this.personNum||this.date||this.allprice||this.closeIndex?this.goOn():(this.clickSearch=!1,this.getAll(1))}},methods:{chooseMoney:function(t){1==t?this.personNum=this.person:this.allprice=this.price},goOn:function(){this.getSearch(1,this.date?this.date[0]/1e3:0,this.date?this.date[1]/1e3:0,this.allprice[0],this.allprice[1],this.personNum,this.closeIndex)},getVal:function(t){this.content=t},prev:function(){this.pageIndex>0&&(this.left+=240,this.pageIndex--)},next:function(){this.pageIndex<this.searchList.length-5&&(this.left-=240,this.pageIndex++)},toFenlei:function(t,e){this.$router.push({path:"/classification",query:{information:t.value,name:t.name}})},getKind:function(){var t=this;this.$http.post(this.api+"/SubKindList",{token:localStorage.getItem("token"),top_id:this.KindId}).then(function(e){if(1==e.data.code){for(var i=e.data.data,a=[],n=0;n<i.length;n++)a.push({img:i[n].image_id?i[n].domain+i[n].themb_url:t.imgUrl,name:i[n].kind_name,value:i[n].kind_id});t.searchList=a}else 3==e.data.code?t.$http.post(t.api+"/home/index/token").then(function(e){localStorage.setItem("token",e.data.data),t.getKind()}):alert(e.data.msg)})},change:function(){this.closeIndex?this.closeIndex="":this.closeIndex=1},show:function(){var t=this;this.$nextTick(function(){t.$refs.saveDateInput.focus()})},rejest:function(){this.price=[0,0]},reduce:function(t,e){if(0==e){if(t.adult>0){this.addClick=!1,t.adult=t.adult-1;for(var i=0,a=0;a<this.otherList.length;a++)i+=this.otherList[a].adult;this.person=i}}else if(0!=t.adult){this.addClick=!1,t.adult=t.adult-1;for(var n=0,s=0;s<this.otherList.length;s++)n+=this.otherList[s].adult;this.person=n}else t.adult=0},getActive:function(){var t=this;this.$http.post(this.api+"/home/Activity/activ_list",{token:localStorage.getItem("token"),kind_id:this.KindId,sort:1,page:1}).then(function(e){1==e.data.code?t.activeList=e.data.data.data:3==e.data.code?t.$http.post(t.api+"/home/Index/token").then(function(e){localStorage.setItem("token",e.data.data),t.getActive()}):alert(e.data.msg)})},add:function(t,e){if(this.person<16){this.addClick=!1,t.adult=t.adult+1;for(var i=0,a=0;a<this.otherList.length;a++)i+=this.otherList[a].adult;this.person=i}else this.addClick=!0},getAll:function(t){var e=this;this.isLoading=!0,this.$http.post(this.api+"/home/Activity/activ_list",{token:localStorage.getItem("token"),kind_id:this.KindId,page:t}).then(function(i){1==i.data.code?(e.total=i.data.data.total,e.AllactiveList=i.data.data.data,e.isLoading=!1):3==i.data.code?e.getAll(t):alert(i.data.msg)})},handleCurrentChange:function(t){this.goOn(t)},toPublish:function(t,e){this.$router.push({path:"/publishPage",query:{information:t.activity_id}})},search:function(t){var e=this;this.isLoading=!0,this.content?this.clickSearch=!0:this.clickSearch=!1,this.$http.post(this.api+"/home/Activity/activ_list",{token:localStorage.getItem("token"),keywords:this.content,kind_id:this.KindId,page:t}).then(function(t){1==t.data.code?(e.total=t.data.data.total,e.AllactiveList=t.data.data.data,e.isLoading=!1):3==t.data.code?e.$http.post(e.api+"/home/index/token").then(function(t){localStorage.setItem("token",t.data.data),e.search(msg)}):alert(t.data.msg)})},getSearch:function(t,e,i,a,n,s,o){var l=this;this.isLoading=!0,this.clickSearch=!0,this.$http.post(this.api+"/home/Activity/activ_list",{token:localStorage.getItem("token"),keywords:this.content,kind_id:this.KindId,page:t,activ_begin_time:e,activ_end_time:i,price_low:a,price_high:n,max_person_num:s,is_volunteen:o}).then(function(t){1==t.data.code?(l.total=t.data.data.total,l.AllactiveList=t.data.data.data,l.isLoading=!1):3==t.data.code?l.$http.post(l.api+"/home/index/token").then(function(t){localStorage.setItem("token",t.data.data),l.search(msg)}):alert(t.data.msg)})}},mounted:function(){this.getKind(),this.goOn()},created:function(){this.KindId=this.$route.query.information,this.date=this.$route.query.date,this.personNum=this.$route.query.personNum,this.allprice=this.$route.query.allprice,this.closeIndex=this.$route.query.closeIndex,this.tiyan=this.$route.query.tiyan,this.content=this.$route.query.content,this.editSearch=this.$route.query.content}}),r={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("Head",{attrs:{type:"fenleiPage",content:t.editSearch},on:{getVal:t.getVal,search:t.search}}),t._v(" "),i("div",{staticStyle:{width:"100%","background-color":"#fff","border-top":"1px solid #eee",padding:"10px 20px",position:"fixed",top:"82px","z-index":"99","text-align":"left"}},[i("el-popover",{attrs:{placement:"bottom",width:"400",trigger:"click"},on:{show:t.show}},[i("el-date-picker",{ref:"saveDateInput",staticStyle:{"margin-left":"20px"},attrs:{"value-format":"timestamp","picker-options":t.pickerOptions2,type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}}),t._v(" "),i("el-button",{attrs:{slot:"reference",type:t.date?"primary":""},slot:"reference"},[t._v("日期")])],1),t._v(" "),i("el-popover",{attrs:{placement:"bottom",width:"350",trigger:"click"}},[t._l(t.otherList,function(e,a){return i("div",{staticStyle:{display:"flex","justify-content":"space-between",margin:"20px"}},[i("div",[i("b",[t._v(t._s(e.person))]),i("p",{staticStyle:{"font-size":"12px"}},[t._v(t._s(1==a?"2 - 12岁":2==a?"2岁以下":""))])]),t._v(" "),i("div",[i("el-button",{attrs:{icon:"el-icon-minus",size:"mini",circle:""},on:{click:function(i){t.reduce(e,a)}}}),t._v(" "),i("span",{staticStyle:{margin:"0 10px"}},[t._v(t._s(e.adult))]),t._v(" "),i("el-button",{attrs:{icon:"el-icon-plus",size:"mini",circle:"",disabled:t.addClick},on:{click:function(i){t.add(e,a)}}})],1)])}),t._v(" "),i("div",{staticStyle:{margin:"20px 12px 20px 12px",display:"flex","justify-content":"flex-end"}},[i("span",{on:{click:function(e){t.chooseMoney(1)}}},[t._v("确定")])]),t._v(" "),i("el-button",{attrs:{slot:"reference",type:t.personNum?"primary":""},slot:"reference"},[t._v(t._s(t.personNum?t.personNum+"人+":"体验人数"))])],2),t._v(" "),i("el-popover",{attrs:{placement:"bottom",width:"400",trigger:"click"}},[i("div",{staticStyle:{width:"350px","margin-left":"20px"}},[i("el-slider",{attrs:{range:"",max:4e3},model:{value:t.price,callback:function(e){t.price=e},expression:"price"}}),t._v(" "),i("div",{staticStyle:{display:"flex","justify-content":"space-between",margin:"20px 0"}},[i("span",[t._v("￥"+t._s(t.price[0]))]),t._v(" "),i("span",[t._v("￥"+t._s(4e3==t.price[1]?"4000+":t.price[1]))])])],1),t._v(" "),i("div",{staticStyle:{margin:"20px 12px 20px 12px",display:"flex","justify-content":"space-between",cursor:"pointer"}},[i("span",{on:{click:function(e){t.rejest(2)}}},[t._v("重置")]),i("span",{on:{click:function(e){t.chooseMoney(2)}}},[t._v("确定")])]),t._v(" "),i("el-button",{attrs:{slot:"reference",type:t.allprice[1]?"primary":""},slot:"reference"},[t._v(t._s(t.allprice[1]?t.allprice[0]+"-"+t.allprice[1]:"价格"))])],1),t._v(" "),i("el-popover",{attrs:{placement:"bottom",trigger:"click"}},[i("div",{staticStyle:{"text-align":"center"}},[i("el-radio",{attrs:{label:"1",border:""},model:{value:t.tiyan,callback:function(e){t.tiyan=e},expression:"tiyan"}},[t._v("户外活动")])],1),t._v(" "),i("div",{staticStyle:{"text-align":"center"}},[i("el-radio",{attrs:{label:"2",border:""},model:{value:t.tiyan,callback:function(e){t.tiyan=e},expression:"tiyan"}},[t._v("少数名族")])],1),t._v(" "),i("div",{staticStyle:{"text-align":"center"}},[i("el-radio",{attrs:{label:"3",border:""},model:{value:t.tiyan,callback:function(e){t.tiyan=e},expression:"tiyan"}},[t._v("本土文化")])],1),t._v(" "),i("el-button",{attrs:{slot:"reference",type:t.tiyan?"primary":""},slot:"reference"},[t._v(t._s(1==t.tiyan?"户外活动":2==t.tiyan?"少数民族":3==t.tiyan?"本土文化":"体验类型"))])],1),t._v(" "),i("el-popover",{attrs:{placement:"bottom",width:"400",trigger:"click"}},[i("div",{staticStyle:{padding:"20px"}},[i("div",{staticStyle:{display:"flex","justify-content":"space-between",margin:"20px 0"}},[i("div",[i("h4",[t._v("是否需要志愿者")]),t._v(" "),i("p",[t._v("参与体验，帮助策划人与大家交流，沟通等")])]),t._v(" "),i("div",{staticStyle:{width:"70px"}},[i("div",{staticStyle:{transition:"width .5s",overflow:"hidden","border-top-right-radius":"20px","border-bottom-right-radius":"20px","border-top-left-radius":"20px","border-bottom-left-radius":"20px"},style:{width:t.closeIndex?"70px":"30px",backgroundColor:t.closeIndex?"#008489":"#fff"},on:{click:t.change}},[""==t.closeIndex?i("i",{staticClass:"el-icon-circle-close-outline",staticStyle:{"font-size":"30px",float:"left"}}):t._e(),t._v(" "),1==t.closeIndex?i("i",{staticClass:"el-icon-circle-check-outline",staticStyle:{"font-size":"30px","background-color":"#fff","border-radius":"50%",color:"#008489",float:"right"}}):t._e()])])])]),t._v(" "),i("el-button",{attrs:{slot:"reference",type:t.closeIndex?"primary":""},slot:"reference"},[t._v(t._s(1==t.closeIndex?"需要志愿者":"是否需要志愿者"))])],1)],1),t._v(" "),i("div",{staticStyle:{"text-align":"left",width:"1080px",margin:"155px auto 0"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.searchList.length,expression:"searchList.length"}]},[i("h3",[t._v("搜索体验")]),t._v(" "),i("div",{staticStyle:{"margin-top":"15px"}},[i("div",{staticStyle:{display:"flex","justify-content":"space-between",width:"1080px",overflow:"hidden",height:"82px"}},[i("div",{staticStyle:{cursor:"pointer",width:"30px",margin:"25px 0",height:"30px",border:"1px solid #318184","border-radius":"50%","line-height":"30px","text-align":"center"},on:{click:t.prev}},[t._v("<")]),t._v(" "),i("div",{staticStyle:{width:"980px","margin-left":"20px",position:"relative",overflow:"hidden"}},[i("div",{staticStyle:{position:"absolute",transition:"all .3s linear",width:"auto"},style:{left:t.left+"px"}},t._l(t.searchList,function(e,a){return e.value!=t.KindId?i("div",{staticStyle:{float:"left",width:"225px",height:"80px","margin-right":"15px",border:"1px solid #E8E8E8"},on:{click:function(i){t.toFenlei(e,a)}}},[i("div",{staticStyle:{cursor:"pointer",display:"flex","justify-content":"flex-start"}},[i("div",{staticStyle:{width:"125px",height:"80px"}},[i("loadingImg",{staticStyle:{width:"100%",height:"100%"},attrs:{type:"3",src:e.img}})],1),t._v(" "),i("div",{staticStyle:{"line-height":"80px","margin-left":"10px"}},[t._v(t._s(e.name))])])]):t._e()}))]),t._v(" "),i("div",{staticStyle:{cursor:"pointer",width:"30px",margin:"25px 0",height:"30px",border:"1px solid #318184","border-radius":"50%","line-height":"30px","text-align":"center",color:"#318184"},on:{click:t.next}},[t._v(">")])])])]),t._v(" "),i("h3",{staticStyle:{"margin-top":"30px"}},[t._v("所有户外体验")]),t._v(" "),i("div",{staticStyle:{"margin-top":"15px",display:"flex","flex-wrap":"wrap",width:"100%"}},t._l(t.AllactiveList,function(e,a){return i("div",{key:a,staticClass:"marginR"},[i("Detail",{attrs:{type:"1",activity_id:e.activity_id,imgUrl:e.domain+e.image_url,city:e.city,total_time:e.total_time,activ_provite:e.activ_provite,comment_num:e.comment_num,name:e.title,score:e.score,english:e.main_laguage,money:e.price,kind:e.kind},on:{toPublish:function(i){t.toPublish(e,a)},consult:function(e){t.consult(a)}}})],1)})),t._v(" "),t.AllactiveList.length?t._e():i("div",[i("None",{attrs:{type:"ALLactive"}})],1),t._v(" "),i("div",{staticStyle:{margin:"20px 0","text-align":"center"}},[i("el-pagination",{attrs:{"page-size":10,layout:"total, prev, pager, next",total:t.total},on:{"current-change":t.handleCurrentChange}})],1),t._v(" "),t.isLoading?i("div",{staticStyle:{position:"fixed",top:"0",left:"0",bottom:"0",right:"0","background-color":"rgba(255,255,255,.8)","z-index":"999",display:"flex","justify-content":"center","align-items":"center"}},[i("Loading")],1):t._e()])],1)},staticRenderFns:[]};var d=i("VU/8")(c,r,!1,function(t){i("1Kq1")},"data-v-0e88a7b0",null);e.default=d.exports}});
//# sourceMappingURL=154.23daf754eb869fed9b0a.js.map