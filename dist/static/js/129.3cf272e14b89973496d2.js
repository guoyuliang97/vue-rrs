webpackJsonp([129],{"1ARM":function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=o("Au9i"),s=(i.Button,i.MessageBox,{name:"mobileLogin",data:function(){return{api:this.GLOBAL.baseURL,step:1,number:"",send:!1,telEroor:!1,input1:"",input2:"",input3:"",input4:"",input5:"",input6:"",mobileCode:"+86 中国",isChoose:!1,contryList:[{title:"1"}],chooseIndex:-1,sms:"",timeOut:60,changeTime:"",clickIndex:0,isPassword:!1,phoneSms:"",password:""}},watch:{number:function(){this.number?this.send=!0:(this.send=!1,this.telEroor=!1)}},components:{Button:i.Button,MessageBox:i.MessageBox},methods:{passLogin:function(){var t=this;this.$http.post(this.api+"/home/User/login_psw",{token:localStorage.getItem("token"),m_code:parseInt(this.mobileCode),mobile:this.number,password:this.password}).then(function(e){1==e.data.code?(t.$router.push("/index"),localStorage.setItem("isLogin",!0)):3==e.data.code?t.$http.post(t.api+"/home/index/token").then(function(e){localStorage.setItem("token",e.data.data),t.passLogin()}):0==e.data.code&&alert(e.data.msg)})},toPassword:function(){this.isPassword=!this.isPassword},againSms:function(){var t=this;this.$http.post(this.api+"/home/User/send_msg",{token:localStorage.getItem("token"),m_code:parseInt(this.mobileCode),mobile:this.number,flag:3}).then(function(e){1==e.data.code?(t.step=2,t.changeTime=setInterval(function(){t.timeOut--,t.sms="重新发送"+t.timeOut,0==t.timeOut&&(t.sms="",t.timeOut=60,clearInterval(t.changeTime))},1e3)):3==e.data.code?t.$http.post(t.api+"/home/index/token").then(function(e){localStorage.setItem("token",e.data.code),t.againSms()}):0==e.data.code&&i.MessageBox.alert(e.data.msg)})},goBack:function(){this.$router.go(-1)},toSend:function(){this.sms||(/^1[3456789]\d{9}$/.test(this.number)?this.againSms():this.telEroor=!0)},toChoose:function(){},telLogin:function(){var t=this;this.$http.post(this.api+"/home/User/login_sms",{token:localStorage.getItem("token"),m_code:parseInt(this.mobileCode),sms_code:this.phoneSms,mobile:this.number}).then(function(e){1==e.data.code?(t.$router.push("/index"),localStorage.setItem("isLogin",!0)):3==e.data.code?t.$http.post(t.api+"/home/index/token").then(function(e){localStorage.setItem("token",e.data.data),t.telLogin()}):0==e.data.code&&i.MessageBox.alert(e.data.msg)})},toWeixin:function(){window.open(this.api+"/WechaLoginWap?token="+localStorage.getItem("token")+"&baseurl="+encodeURIComponent(location.origin))}},mounted:function(){}}),n={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("div",[o("div",{staticStyle:{padding:"1rem","background-color":"#008489",color:"#FFF","text-align":"left"}},[o("svg",{staticClass:"vux-x-icon vux-x-icon-ios-arrow-back",staticStyle:{fill:"white"},attrs:{type:"ios-arrow-back",size:"30",xmlns:"http://www.w3.org/2000/svg",width:"30",height:"30",viewBox:"0 0 512 512"},on:{click:t.goBack}},[o("path",{attrs:{d:"M352 128.4L319.7 96 160 256l159.7 160 32.3-32.4L224.7 256z"}})])]),t._v(" "),o("div",[o("div",{staticStyle:{padding:"10px",display:"flex","justify-content":"flex-start","border-bottom":"1px solid #eee",width:"80%",margin:"50px auto 0"}},[o("div",{staticStyle:{"border-radius":"5px",display:"flex","justify-content":"flex-start","font-size":"1.5rem","border-right":"1px solid #eee","padding-right":"1rem"},on:{click:t.toChoose}},[o("div",{staticStyle:{width:"70px",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap"}},[t._v(t._s(t.mobileCode))]),t._v(" "),o("div",[o("svg",{staticClass:"vux-x-icon vux-x-icon-ios-arrow-down",attrs:{type:"ios-arrow-down",size:"20",xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 512 512"}},[o("path",{attrs:{d:"M396.6 160l19.4 20.7L256 352 96 180.7l19.3-20.7L256 310.5z"}})])])]),t._v(" "),o("div",{staticStyle:{"border-radius":"5px"}},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.number,expression:"number"}],staticClass:"num_input",attrs:{oninput:"if( this.value.length > 11 )  this.value = this.value.slice(0,11)",type:"number",placeholder:"输入手机号",pattern:"[0-9]*"},domProps:{value:t.number},on:{input:function(e){e.target.composing||(t.number=e.target.value)}}}),t._v(" "),t.telEroor?o("p",{staticStyle:{color:"red",position:"absolute","font-size":"1rem","padding-left":"1rem"}},[t._v("请输入有效电话 ")]):t._e()])]),t._v(" "),t.isPassword?t._e():o("div",{staticStyle:{padding:"1rem",display:"flex","justify-content":"space-between",width:"80%",margin:"2rem auto 0","border-bottom":"1px solid #eee"}},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.phoneSms,expression:"phoneSms"}],staticClass:"num_inputA",attrs:{type:"number",placeholder:"输入验证码"},domProps:{value:t.phoneSms},on:{input:function(e){e.target.composing||(t.phoneSms=e.target.value)}}}),t._v(" "),o("div",{staticStyle:{color:"#008489"},on:{click:t.toSend}},[t._v("\n            "+t._s(t.sms?t.sms:"发送验证码")+"\n          ")])]),t._v(" "),t.isPassword?o("div",{staticStyle:{padding:"1rem",display:"flex","justify-content":"space-between",width:"80%",margin:"2rem auto 0","border-bottom":"1px solid #eee"}},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"num_inputA",attrs:{type:"password",placeholder:"输入登陆密码"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})]):t._e(),t._v(" "),o("div",{staticStyle:{width:"80%",margin:"3rem auto 0","background-color":"#008489",color:"#fff",padding:"1rem 0","text-align":"center","font-size":"1.5rem"},on:{click:function(e){t.isPassword?t.passLogin():t.telLogin()}}},[t._v("\n          登陆\n        ")]),t._v(" "),o("div",{staticStyle:{width:"80%",margin:"1rem auto 1.5rem",border:"1px solid #008489",color:"#008489","text-align":"center",padding:"1rem 0"},on:{click:function(e){t.isPassword?t.toPassword():t.toWeixin()}}},[t._v("\n         "+t._s(t.isPassword?"其他登陆方式":"微信快捷登陆")+"\n        ")]),t._v(" "),t.isPassword?t._e():o("div",[o("p",{staticStyle:{"text-align":"center",color:"#008489"},on:{click:t.toPassword}},[t._v("密码登陆")])]),t._v(" "),t.isChoose?o("div",{staticStyle:{position:"fixed",top:"0",left:"0",right:"0",bottom:"0","background-color":"rgba(0,0,0,.5)","z-index":"20",display:"flex","align-items":"center","justify-content":"center"}},[o("div",{staticStyle:{position:"relative",width:"80%",height:"90%","background-color":"#fff","z-index":"999"}},[o("div",{staticStyle:{height:"90%","overflow-y":"scroll"}},t._l(t.contryList,function(e,i){return o("div",{staticStyle:{display:"flex","justify-content":"space-between",padding:"10px 10px","border-bottom":"1px solid #eee",width:"80%",margin:"0 auto"}},[o("div",{staticStyle:{"font-size":"1.5rem"}},[t._v(t._s(e.title))]),t._v(" "),o("div",{staticStyle:{padding:"5px","border-radius":"50%"},style:{backgroundColor:t.chooseIndex===i?"#008489":"#eee"}},[o("div",{staticStyle:{width:"0.5rem",height:"0.5rem","border-radius":"50%"},style:{backgroundColor:t.chooseIndex===i?"#fff":"#eee"}})])])})),t._v(" "),o("div",{staticStyle:{position:"absolute",bottom:"10px",width:"80%",left:"10%",display:"flex","justify-content":"space-between"}},[o("mt-button",{staticStyle:{width:"40%"},attrs:{plain:""},on:{click:function(e){t.isChoose=!1}}},[t._v("取消")]),t._v(" "),o("mt-button",{staticStyle:{width:"40%"},attrs:{plain:""}},[t._v("确定")])],1)])]):t._e()])])])},staticRenderFns:[]};var a=o("VU/8")(s,n,!1,function(t){o("mzjg")},"data-v-1f73d396",null);e.default=a.exports},mzjg:function(t,e){}});
//# sourceMappingURL=129.3cf272e14b89973496d2.js.map