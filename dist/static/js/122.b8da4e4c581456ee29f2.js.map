{"version":3,"sources":["webpack:///./src/components/story/wonderful.vue","webpack:///./src/components/story/wonderful.vue?d015","webpack:///./src/components/story/wonderful.vue?e706"],"names":["story_wonderful","Detail","Loading","None","data","api","this","GLOBAL","baseURL","img","recommendedList","wonderfulList","isLoading","loadingState","page","request","components","methods","getStory","val","_this","$http","post","token","localStorage","getItem","sort","then","res","code","i","length","push","setItem","alert","msg","toperson","item","index","$router","path","query","information","userId","toStory","story_id","addZan","_this2","zanIndex","flag","table_id","type","zan","onScroll","scrollTop","document","documentElement","body","windowHeight","clientHeight","scrollHeight","getHotLocal","_this3","Bus","$emit","toSearch","name","key","city","mounted","window","addEventListener","destroyed","removeEventListener","components_story_wonderful","render","_vm","_h","$createElement","_c","_self","staticClass","directives","rawName","value","expression","_v","_l","style","backgroundImage","backgroundSize","on","click","$event","_s","_e","attrs","staticStyle","position","top","left","right","bottom","background-color","z-index","font-size","margin","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/122.b8da4e4c581456ee29f2.js","sourcesContent":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n  import None from '../../public/noNumber'\n  import Bus from '../../assets/eventBus'\n  import Loading from '../../public/Loading'\n\timport Detail from \"../../public/detail.vue\"\n\texport default {\n\t\tdata() {\n\t\t\treturn {\n\t\t\t  api: this.GLOBAL.baseURL,\n        img:'./static/img/home/1.jpg',\n\t\t\t\trecommendedList:[],\n        wonderfulList:[],\n        isLoading:false,\n        loadingState:false,\n        page:1,\n        request:false,\n\t\t\t};\n\t\t},\n\t\tcomponents:{\n\t\t\tDetail,\n      Loading,\n      None\n\t\t},\n    methods:{\n      getStory(val){\n        this.$http.post(this.api + '/home/Story/story_list',{\n          token: localStorage.getItem('token'),\n          sort:2,\n          page:val,\n        })\n          .then(res=>{\n            if(res.data.code == 1){\n              let data = res.data.data.data\n              for(let i = 0;i<data.length;i++){\n               this.wonderfulList.push(data[i])\n              }\n              if(!data.length){\n                this.request = true\n              }else{\n                this.request = false\n              }\n              this.isLoading = false\n              this.loadingState = false\n\n            }else if(res.data.code == 3){\n              this.$http.post(this.api + '/home/Index/token')\n                .then(res=>{\n                  localStorage.setItem('token',res.data.data)\n                  this.getStory(val)\n                })\n            }else{\n              alert(res.data.msg)\n            }\n          })\n      },\n      toperson(item,index){\n        this.$router.push({\n          path: '/userdata',\n          query: {\n            information: item.userId\n          }\n        })\n      },\n      toStory(item,index){\n        this.$router.push({\n          path: '/storyPage',\n          query:{\n            information: item.story_id\n          }\n        })\n      },\n      //点赞\n      addZan(item,index){\n        if(item.zanIndex == 0){\n          this.$http.post(this.api + '/home/Comment/praise',{\n            token: localStorage.getItem('token'),\n            flag: 1,\n            table_id: item.story_id,\n            type: 1\n          })\n            .then(res=>{\n              if(res.data.code == 1){\n                item.zanIndex = 1\n                item.zan = item.zan + 1\n              }else if(res.data.code == 3){\n                this.$http.post(this.api + '/home/index/token')\n                  .then(res=>{\n                    localStorage.setItem('token',res.data.data)\n                    this.addZan(item,index)\n                  })\n              }else{\n                alert(res.data.msg)\n              }\n            })\n\n        }else{\n          this.$http.post(this.api + '/home/Comment/praise',{\n            token: localStorage.getItem('token'),\n            flag: 1,\n            table_id: item.story_id,\n            type: 2\n          })\n            .then(res=>{\n              if(res.data.code == 1){\n                item.zan = item.zan - 1\n                item.zanIndex = 0\n              }else if(res.data.code == 3){\n                this.$http.post(this.api + '/home/index/token')\n                  .then(res=>{\n                    localStorage.setItem('token',res.data.data)\n                    this.addZan(item,index)\n                  })\n              }else{\n                alert(res.data.msg)\n              }\n            })\n        }\n      },\n      onScroll(){\n        var scrollTop = document.documentElement.scrollTop||document.body.scrollTop;\n        //变量windowHeight是可视区的高度\n        var windowHeight = document.documentElement.clientHeight || document.body.clientHeight;\n        //变量scrollHeight是滚动条的总高度\n        var scrollHeight = document.documentElement.scrollHeight||document.body.scrollHeight;\n        //滚动条到底部的条件\n        if(scrollHeight == scrollTop+windowHeight){\n          //写后台加载数据的函数\n          if(!this.request){\n            this.loadingState = true\n            this.page += 1\n            this.getStory(this.page)\n          }\n        }\n      },\n      getHotLocal() {\n        this.$http.post(this.api + '/PopularCityStory',{\n          token: localStorage.getItem('token')\n        })\n          .then(res=>{\n            if(res.data.code == 1){\n              this.recommendedList = res.data.data\n              Bus.$emit('hotPlace',res.data.data)\n            }else if(res.data.code == 3){\n\n            }else{\n              alert(res.data.msg)\n            }\n          })\n      },\n      toSearch(item) {\n        this.$router.push({\n          name: 'homeSearch',\n          query:{\n            key: item.city,\n            type:1\n          }\n        })\n      },\n    },\n    mounted() {\n      window.addEventListener('scroll',this.onScroll)\n\t\t  this.isLoading = true\n\t\t  this.getStory(this.page)\n      this.getHotLocal()\n    },\n    destroyed(){\n      window.removeEventListener('scroll',this.onScroll)\n    }\n  }\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/story/wonderful.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"wonderful_con\"},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.recommendedList.length),expression:\"recommendedList.length\"}]},[_c('p',{staticClass:\"title\"},[_vm._v(\"推荐搜索\")]),_vm._v(\" \"),_c('div',{staticClass:\"recommended_list\"},_vm._l((_vm.recommendedList),function(item,index){return (index<6)?_c('div',{staticClass:\"recommended_detail\",style:({backgroundImage:'url('+item.img+')',backgroundSize:'100% 100%'})},[_c('div',{staticClass:\"recommended_bg fontweight\",on:{\"click\":function($event){_vm.toSearch(item)}}},[_c('p',{staticClass:\"recommended_name\"},[_vm._v(_vm._s(item.city))])])]):_vm._e()}))]),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.wonderfulList.length),expression:\"wonderfulList.length\"}]},[_c('p',{staticClass:\"title\"},[_vm._v(\"精选故事\")]),_vm._v(\" \"),_c('div',{staticClass:\"select_list\"},_vm._l((_vm.wonderfulList),function(item,index){return _c('div',{staticClass:\"select_detail\"},[_c('Detail',{attrs:{\"type\":\"2\",\"data\":item},on:{\"toperson\":function($event){_vm.toperson(item,index)},\"toStory\":function($event){_vm.toStory(item,index)},\"addZan\":function($event){_vm.addZan(item,index)}}})],1)}))]),_vm._v(\" \"),_c('Loading',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.loadingState),expression:\"loadingState\"}]}),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isLoading),expression:\"isLoading\"}],staticStyle:{\"position\":\"fixed\",\"top\":\"0\",\"left\":\"0\",\"right\":\"0\",\"bottom\":\"0\",\"background-color\":\"#fff\",\"z-index\":\"999\"}},[_c('Loading',{staticStyle:{\"position\":\"fixed\",\"top\":\"50%\",\"left\":\"50%\",\"z-index\":\"9999\"}})],1),_vm._v(\" \"),(!_vm.wonderfulList.length)?_c('div',[_c('None',{attrs:{\"type\":\"story\"}})],1):_vm._e(),_vm._v(\" \"),(_vm.request)?_c('p',{staticStyle:{\"font-size\":\"12px\",\"margin\":\"30px 0\"}},[_vm._v(\"············没有更多故事了！快去发布吧！············\")]):_vm._e()],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-257463b6\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vux-loader/src/before-template-compiler-loader.js!./node_modules/vux-loader/src/template-loader.js!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/story/wonderful.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-257463b6\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../node_modules/vux-loader/src/style-loader.js!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./wonderful.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vux-loader/src/script-loader.js!../../../node_modules/vux-loader/src/script-loader.js!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./wonderful.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vux-loader/src/script-loader.js!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./wonderful.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-257463b6\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vux-loader/src/before-template-compiler-loader.js!../../../node_modules/vux-loader/src/template-loader.js!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./wonderful.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/story/wonderful.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}