webpackJsonp([76],{"+SCx":function(t,e){},p0wv:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("mvHQ"),a=s.n(i),n=s("ZKg9"),o=s("/nBy"),d=s("DjrJ"),r=(d.a,o.a,n.a,{name:"playerReturn",data:function(){return{api:this.GLOBAL.baseURL,index:1,options:[{label:"全退",value:1}],value:1,reson:"",houseList:[],house:"",order_id:"",isLoading:!1}},components:{Head:d.a,Loading:o.a,LoadingImg:n.a},methods:{goBack:function(){this.$router.go(-1)},sendRefund:function(){var t=this;if(this.isLoading=!0,this.house.is_refund){for(var e=[],s=[],i=0,n=0,o=0;o<this.house.house.length;o++)e.push({oh_id:this.house.house[o].oh_id,num:this.house.house[o].num});for(var d=0;d<this.house.detail.length;d++)"1"==this.house.detail[d].type||"2"==this.house.detail[d].type?s.push(this.house.detail[d].combine_id):(i+=Number(this.house.detail[d].adult),n+=Number(this.house.detail[d].kids));this.$http.post(this.api+"/RefundSTwo",{token:localStorage.getItem("token"),order_id:this.house.order_id,person_num:i,house:a()(e),combine:a()(s),reason:this.reson,flag:0,type:1,kids_num:n}).then(function(e){1==e.data.code?(t.$message({type:"success",message:"退款成功！"}),t.isLoading=!1,t.goBack()):3==e.data.code?t.sendRefund():0==e.data.code&&(t.isLoading=!1,t.$message({type:"error",messages:e.data.msg}))})}else this.$http.post(this.api+"/RefundSTwo",{token:localStorage.getItem("token"),order_id:this.house.order_id,reason:this.reson,flag:1,type:1}).then(function(e){1==e.data.code?(t.index=2,t.isLoading=!1):3==e.data.code?t.$http.post(t.api+"/home/index/token").then(function(e){localStorage.setItem("token",e.data.data),t.sendRefund()}):0==e.data.code&&(alert(e.data.msg),t.isLoading=!1)})},getOrder:function(){var t=this;this.isLoading=!0,this.$http.post(this.api+"/OrderRefundDTwo",{token:localStorage.getItem("token"),order_id:this.order_id,verson:2}).then(function(e){1==e.data.code?(t.house=e.data.data,t.isLoading=!1):3==e.data.code?t.$http.post(t.api+"/home/index/token").then(function(e){localStorage.setItem("token",e.data.data),t.getOrder()}):0==e.data.code&&(alert(e.data.msg),t.isLoading=!1)})}},mounted:function(){this.getOrder()},created:function(){this.order_id=this.$route.query.information}}),l={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticStyle:{"text-align":"left"}},[s("Head",{attrs:{type:"refundDescirbe"}}),t._v(" "),t.house?s("div",{staticClass:"fontweight ",staticStyle:{"background-color":"#fff","font-size":"16px",padding:"20px",width:"1080px",margin:"85px auto"}},[s("p",{staticClass:"contentTitle"},[t._v("我的活动  > 查看预订>主动退款")]),t._v(" "),s("p",{staticClass:"marginT",staticStyle:{"font-size":"18px"}},[t._v("我退款给")]),t._v(" "),s("div",{staticClass:"flexStart marginT"},[s("LoadingImg",{staticStyle:{width:"92.04px",height:"92.04px"},attrs:{type:"user",src:t.house.user.head_image?t.house.user.headimage.domain+t.house.user.headimage.image_url:""}}),t._v(" "),s("div",{staticStyle:{"margin-left":"10px","line-height":"92px","font-size":"29px"}},[s("b",[t._v(t._s(t.house.user.family_name+t.house.user.middle_name+t.house.user.name?t.house.user.family_name+t.house.user.middle_name+t.house.user.name:"匿名用户"))])])],1),t._v(" "),s("div",{staticStyle:{"margin-top":"25px"}},[s("p",[t._v("参与人数："+t._s(t.house.num)+"人")]),t._v(" "),s("p",{staticClass:"marginT"},[t._v("预定时间："+t._s(t.house.activ_begin_time)+"—"+t._s(t.house.activ_end_time))])]),t._v(" "),s("hr",{staticClass:"lineS"}),t._v(" "),s("div",{staticClass:"flexStart"},[s("div",[t._v("价格详情：")]),t._v(" "),t.house.detail.length?s("div",t._l(t.house.detail,function(e,i){return s("div",{staticClass:"marginTop"},["1"==e.type||"2"==e.type?s("div",[t._v("\n            "+t._s("1"==e.type?"亲子":e.name)),s("span",{staticClass:"marginLeft"}),t._v(t._s(e.adult)+"成人"),"1"==e.type?s("span",[t._v(t._s(e.kids)+"儿童")]):t._e(),t._v(" "),s("span",{staticClass:"marginLeft"}),t._v("¥"+t._s(e.price)+"\n          ")]):t._e(),t._v(" "),"0"==e.type?s("div",[e.adult?s("div",{staticClass:"marginTop"},[t._v("标准"),s("span",{staticClass:"marginLeft"}),t._v(t._s(e.adult)+"人"),s("span",{staticClass:"marginLeft"}),t._v("¥"+t._s(e.adult_price))]):t._e(),t._v(" "),e.kids?s("div",[t._v("儿童"),s("span",{staticClass:"marginLeft"}),t._v(t._s(e.kids)+"人"),s("span",{staticClass:"marginLeft"}),t._v("¥"+t._s(e.kids_price))]):t._e()]):t._e()])})):t._e(),t._v(" "),t.house.detail.length?t._e():s("div",[t._v("\n        无\n      ")])]),t._v(" "),s("div",{staticClass:"flexStart marginT"},[s("div",[t._v("预订住宿：")]),t._v(" "),t.house.house.length?s("div",t._l(t.house.house,function(e,i){return s("p",{staticClass:"marginTop"},[s("span",[t._v(t._s(e.title))]),t._v(" "),s("span",{staticClass:"marginLeft"}),t._v(" "),s("span",[t._v("房数"),s("i",{staticClass:"el-icon-close"}),t._v(t._s(e.num))]),t._v(" "),s("span",{staticClass:"marginLeft"}),t._v(" "),s("span",[t._v("总额￥ "+t._s(e.price))])])})):t._e(),t._v(" "),t.house.house.length?t._e():s("div",[t._v("无")])]),t._v(" "),s("hr",{staticClass:"lineS"}),t._v(" "),s("div",{staticClass:"flexStart marginT"},[s("p",[t._v("退款方式："),s("span",[t._v(t._s(t.house.is_refund?"非全款退":"全款退"))])])]),t._v(" "),s("div",{staticClass:"flexStart marginT"},[s("div",{staticStyle:{"line-height":"40px"}},[t._v("退款原因：")]),t._v(" "),s("div",{staticStyle:{"margin-left":"9px"}},[s("el-input",{staticStyle:{width:"410px"},attrs:{type:"textarea",rows:4},model:{value:t.reson,callback:function(e){t.reson=e},expression:"reson"}})],1)]),t._v(" "),s("hr",{staticClass:"lineS"}),t._v(" "),s("div",{staticClass:" marginT"},[s("p",[t._v("支付总额   ￥"+t._s(t.house.pay_price))])]),t._v(" "),s("div",{staticClass:" marginT"},[s("p",[t._v("退款总额   "),s("span",{staticStyle:{color:"#F73D3D"}},[t._v("￥"+t._s(t.house.total_price))])])]),t._v(" "),s("div",{staticClass:"marginT"},[s("p",[t._v("退款时间'   "+t._s(t.house.create_time))])]),t._v(" "),s("div",{staticClass:"marginT"},[s("p",[t._v("订单编号   "+t._s(t.house.order_no))])]),t._v(" "),s("hr",{staticClass:"lineS"}),t._v(" "),s("div",{staticClass:"flexEnd"},[s("div",{staticStyle:{color:"#999","font-size":"13px","line-height":"28px",cursor:"pointer"},on:{click:t.goBack}},[t._v("取消退款")]),t._v(" "),s("el-button",{staticStyle:{"margin-left":"20px",border:"1px solid rgba(102,102,102,1)"},attrs:{size:"mini"},on:{click:t.sendRefund}},[t._v("提交申请")])],1)]):t._e(),t._v(" "),t.isLoading?s("div",{staticStyle:{position:"fixed",top:"0",left:"0",right:"0",bottom:"0","z-index":"999","background-color":"rgba(255,255,255,.8)",display:"flex","justify-content":"center","align-items":"center"}},[s("Loading")],1):t._e()],1)},staticRenderFns:[]};var _=s("VU/8")(r,l,!1,function(t){s("+SCx")},"data-v-55952ecd",null);e.default=_.exports}});
//# sourceMappingURL=76.d8f77f599e469075f5f9.js.map