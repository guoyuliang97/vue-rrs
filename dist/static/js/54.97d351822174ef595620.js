webpackJsonp([54],{"32EM":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={data:function(){return{api:this.GLOBAL.baseURL,typeVal:[],types:[],props:{value:"kind_id",label:"kind_name"},typeWay:"",replay:[],questionList:[],complete:"",active_id:""}},methods:{changeRouter:function(){var t=this;this.typeVal.length?this.$http.post(this.api+"/home/Activity/save_activity",{token:localStorage.getItem("token"),activity_id:this.active_id,question:this.replay,kind_id:this.typeVal[this.typeVal.length-1],step:1}).then(function(e){1==e.data.code?t.complete?t.$message({type:"success",message:"保存成功！"}):t.$emit("changeRouter",{id:3,router:"Introduce",information:t.active_id,complete:t.complete}):3==e.data.code?t.changeRouter():0==e.data.code&&t.$alert(e.data.msg)}):this.$message({type:"info",message:"请选择类别"})},answerAdd:function(t,e){this.replay[e]?this.replay[e]={answer_id:this.replay[e].answer_id,question_id:t.question_id,option_id:t.answer,other:""}:this.replay[e]={question_id:t.question_id,option_id:t.answer,other:""}},getKind:function(){var t=this;this.$http.post(this.api+"/home/Kind/kindlist",{token:localStorage.getItem("token")}).then(function(e){if(1==e.data.code)for(var a in e.data.data)t.types.push(e.data.data[a]);else 3==e.data.code?t.getKind():0==e.data.code&&t.$alert(e.data.msg)})},getQuestion:function(){var t=this;this.$http.post(this.api+"/home/Activity/question",{token:localStorage.getItem("token"),flag:1,activity_id:this.active_id}).then(function(e){1==e.data.code?t.questionList=e.data.data:3==e.data.code?t.getQuestion():0==e.data.code&&alert(e.data.msg)})},getActive:function(){var t=this;this.$http.post(this.api+"/ActivityE",{token:localStorage.getItem("token"),activity_id:this.active_id,visit:0}).then(function(e){if(1==e.data.code){for(var a=0;a<t.questionList.length;a++)for(var i=0;i<e.data.data.answer.length;i++)t.questionList[a].question_id==e.data.data.answer[i].question_id&&(t.questionList[a].answer=e.data.data.answer[i].option_id,t.replay.push(e.data.data.answer[i]));for(var s=0;s<e.data.data.kind_id.split(",").length;s++)t.typeVal.push(parseInt(e.data.data.kind_id.split(",")[s]))}else 3==e.data.code?t.getActive():0==e.data.code&&alert(e.data.msg)})}},created:function(){window.scroll(0,0),this.active_id=this.$route.query.information},mounted:function(){this.complete=this.$route.query.complete,this.getKind(),this.getQuestion(),this.active_id&&this.getActive()}},s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"exp_con"},[a("p",{staticClass:"title"},[t._v("你提供的体验是什么类型的？")]),t._v(" "),a("p",{staticClass:"language_txt"},[t._v("请选择最能说明您的体验的类别。")]),t._v(" "),a("el-cascader",{staticStyle:{width:"200px","margin-top":"20px"},attrs:{placeholder:"请选择",props:t.props,options:t.types,filterable:"",clearable:""},model:{value:t.typeVal,callback:function(e){t.typeVal=e},expression:"typeVal"}}),t._v(" "),t._l(t.questionList,function(e,i){return a("div",{key:i},[a("p",{staticClass:"fontweight main_language"},[t._v(t._s(e.title))]),t._v(" "),a("div",{staticClass:"active_choice"},[a("el-radio-group",{on:{change:function(a){t.answerAdd(e,i)}},model:{value:e.answer,callback:function(a){t.$set(e,"answer",a)},expression:"item.answer"}},t._l(e.option,function(e){return a("p",[a("el-radio",{attrs:{label:e.option_id}},[t._v(t._s(e.name))])],1)}))],1)])}),t._v(" "),a("div",{staticClass:"exp_btn"},[a("el-button",{attrs:{type:"primary",plain:""},on:{click:t.changeRouter}},[t._v(t._s("1"==t.complete?"保存":"下一步"))])],1)],2)},staticRenderFns:[]};var n=a("VU/8")(i,s,!1,function(t){a("JeLO")},null,null);e.default=n.exports},JeLO:function(t,e){}});
//# sourceMappingURL=54.97d351822174ef595620.js.map