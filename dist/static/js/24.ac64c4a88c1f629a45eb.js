webpackJsonp([24],{bkB2:function(t,e){},fZFk:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("a20G"),o=a("4hmb"),n=a("DjrJ"),s=a("/nBy"),r=a("mnKu"),l=a("ZKg9"),d=(n.a,o.a,s.a,i.a,l.a,{name:"homeSearch",data:function(){return{api:this.GLOBAL.baseURL,isLoading:!1,wonderfulList:[],hotList:[],goodVolunteer:[],actotal:0,language:[],isLocal:!1,keyWord:""}},components:{Head:n.a,Detail:o.a,Loading:s.a,None:i.a,LoadingImg:l.a},methods:{toMore:function(t){1==t?this.$router.push({path:"/experienceCentre",query:{information:this.keyWord}}):2==t?this.$router.push("/story"):this.$router.push("/volunteerList")},goBack:function(){this.$router.go(-1)},getSearch:function(t){var e=this;this.isLoading=!0,this.$http.post(this.api+"/home/Search/search",{token:localStorage.getItem("token"),keywords:this.$route.query.key,page:t}).then(function(t){1==t.data.code?(e.hotList=t.data.data.activity.data,e.wonderfulList=t.data.data.story.data,e.goodVolunteer=t.data.data.user.data,e.isLoading=!1,e.actotal=t.data.data.activity.total,e.hotList.length||e.wonderfulList.length||e.goodVolunteer.length?e.isLocal=!1:e.isLocal=!0):3==t.data.code?e.$http.post(e.api+"/home/Index/token").then(function(t){localStorage.setItem("token",t.data.data),e.getSearch()}):0==t.data.code&&alert(t.data.msg)})},toStory:function(t,e){this.$router.push({path:"/storyPage",query:{information:t.story_id}})},addZan:function(t,e){var a=this,i="";i=0==t.is_praise?1:2,this.$http.post(this.api+"/home/Comment/praise",{token:localStorage.getItem("token"),flag:1,table_id:t.story_id,type:i}).then(function(o){1==o.data.code?(t.praise_num=2==i?t.praise_num-1:t.praise_num+1,t.is_praise=2==i?0:1):3==o.data.code?a.$http.post(a.api+"/home/index/token").then(function(i){localStorage.setItem("token",i.data.data),a.addZan(t,e)}):0==o.data.code&&alert(o.data.msg)})},getStory:function(t){var e=this;this.isLoading=!0,this.$http.post(this.api+"/home/Story/story_list",{token:localStorage.getItem("token"),keywords:this.$route.query.key,page:t}).then(function(a){1==a.data.code?(e.total=a.data.data.total,e.wonderfulList=a.data.data.data,e.isLoading=!1,e.wonderfulList.length?e.isLocal=!1:e.isLocal=!0):3==a.data.code?e.$http.post(e.api+"/home/index/token").then(function(a){localStorage.setItem("token",a.data.data),e.getStory(t)}):0==a.data.code&&alert(a.data.msg)})},handleCurrentChange:function(t){this.$route.query.type?this.getStory(t):this.getSearch(t)},activeCurrentChange:function(){},userCurrentChange:function(){},toPublish:function(t,e){this.$router.push({path:"/publishPage",query:{information:t.activity_id}})},consult:function(t,e){localStorage.getItem("isLogin")?this.$router.push({path:"/counsel",query:{information:this.hotList[e]}}):this.$alert("您还没有注册或者登陆")},toPerson:function(t){this.$router.push({path:"/userdata",query:{information:t.user_id}})}},mounted:function(){window.scroll(0,0);1==this.$route.query.type?this.getStory(1):this.getSearch(1)},created:function(){this.language=Object(r.a)(),this.keyWord=this.$route.query.key}}),c={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Head",{attrs:{type:"homeSearch"}}),t._v(" "),a("div",{staticStyle:{width:"50px","margin-top":"80px",cursor:"pointer","margin-left":"10%"},on:{click:t.goBack}},[a("i",{staticClass:"el-icon-arrow-left"}),t._v("返回")]),t._v(" "),a("div",{staticStyle:{margin:"10px auto",width:"1080px"}},[t.hotList.length?a("div",[a("h3",{staticStyle:{"text-align":"left",margin:"20px 0"}},[t._v("相关活动：")]),t._v(" "),a("div",{staticClass:"hot_list"},t._l(t.hotList,function(e,i){return a("div",{staticClass:"hot_detail"},[a("Detail",{attrs:{type:"1",activity_id:e.activity_id,imgUrl:e.domain+e.image_url,city:e.city,total_time:e.total_time,activ_provite:e.activ_provite,comment_num:e.comment_num,name:e.title,score:e.score,english:e.main_laguage,money:e.price,kind:e.kind},on:{toPublish:function(a){t.toPublish(e,i)},consult:function(e){t.consult(i)}}})],1)})),t._v(" "),10==t.hotList.length?a("p",{staticStyle:{"text-align":"left","margin-top":"20px",cursor:"pointer"}},[a("span",{on:{click:function(e){t.toMore(1)}}},[a("b",[t._v("查看更多")])])]):t._e()]):t._e(),t._v(" "),t.wonderfulList.length?a("div",[a("h3",{staticStyle:{"text-align":"left",margin:"20px 0"}},[t._v("相关故事：")]),t._v(" "),a("div",{staticClass:"wonderful"},t._l(t.wonderfulList,function(e,i){return i<8?a("div",{staticClass:"wonderful_detail"},[a("Detail",{attrs:{type:"2",zanIndex:e.is_praise,status:e.status,address:e.address,remark:e.title,imgUrl:e.cover_image?e.cover.domain+e.cover.image_url:"../../../static/img/static/defult.png",avator:e.user.head_image?e.user.headimage.domain+e.user.headimage.image_url:"../../../static/img/static/user.png",zan:parseInt(e.praise_num),say:parseInt(e.leaving_num)},on:{toperson:function(a){t.toperson(e,i)},toStory:function(a){t.toStory(e,i)},addZan:function(a){t.addZan(e,i)}}})],1):t._e()})),t._v(" "),t.wonderfulList.length>=8?a("p",{staticStyle:{"text-align":"left","margin-top":"20px",cursor:"pointer"}},[a("span",{on:{click:function(e){t.toMore(2)}}},[a("b",[t._v("查看更多")])])]):t._e()]):t._e(),t._v(" "),t.goodVolunteer.length?a("div",[a("h3",{staticStyle:{"text-align":"left",margin:"20px 0"}},[t._v("相关志愿者：")]),t._v(" "),a("div",{staticClass:"volunteer"},t._l(t.goodVolunteer,function(e){return a("div",{staticStyle:{cursor:"pointer"},on:{click:function(a){t.toPerson(e)}}},[a("LoadingImg",{staticClass:"img",attrs:{type:"3",src:e.head_image?e.headimage.domain+e.headimage.image_url:""}}),t._v(" "),a("div",{staticClass:"text"},[a("div",{staticClass:"clear"},[a("div",{staticStyle:{float:"left"}},[t._v(t._s(e.name))]),t._v(" "),a("div",{staticStyle:{float:"right","font-size":"12px"}},[a("el-rate",{attrs:{value:parseInt(e.score),disabled:""}})],1)]),t._v(" "),a("div",{staticClass:"clear"},[a("div",{staticStyle:{float:"left"}},[t._v(t._s(e.gender))]),t._v(" "),a("div",{staticStyle:{float:"right"}},[t._v(t._s(e.local))])])])],1)})),t._v(" "),t.goodVolunteer.length>=8?a("p",{staticStyle:{"text-align":"left","margin-top":"20px",cursor:"pointer"}},[a("span",{on:{click:function(e){t.toMore(3)}}},[a("b",[t._v("查看更多")])])]):t._e()]):t._e(),t._v(" "),t.isLocal?a("div",[a("None",{attrs:{type:"local"}})],1):t._e()]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.isLoading,expression:"isLoading"}],staticStyle:{position:"fixed",top:"0",left:"0",right:"0",bottom:"0","background-color":"#fff","z-index":"999"}},[a("Loading",{staticStyle:{position:"fixed",top:"50%",left:"50%"}})],1)],1)},staticRenderFns:[]};var u=a("VU/8")(d,c,!1,function(t){a("bkB2")},"data-v-f642c4d6",null);e.default=u.exports}});
//# sourceMappingURL=24.ac64c4a88c1f629a45eb.js.map