webpackJsonp([23],{"1drE":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("mvHQ"),n=i.n(a),s=i("bOdI"),o=i.n(s),c=i("PhFL"),l=i("dbwY"),r=i("4hmb"),d=i("a20G"),h=i("/nBy"),p=i("DjrJ"),u=i("ZKg9"),f=(p.a,h.a,u.a,d.a,r.a,l.a,c.a,{name:"experienceCentre",data:function(){var t;return t={api:this.GLOBAL.baseURL,imgUrl:"../../static/img/static/images/allptp.png",localList:[],left:0,isPrev:!1,isNext:!0,sliderIndex:0,hightList:[],experList:[],pickerOptions2:{disabledDate:function(t){return t.getTime()<Date.now()-864e5}},date:"",person:"",addClick:!1,otherList:[{person:"成人+",adult:0}],tiyan:"",closeIndex:"",price:[0,0],total:0,HighLoading:!1,isLoading:!1,searchList:"",editSearch:"搜索",content:"",allprice:"",country:[],province:[],city:[],xian:[],xianList:[],mapIndex:0,westSouth:"",eastNorth:"",adreeList:[],map:"",markerIndex:"",type:"allActive",discout:[],clickIndex:-1,holidayL:[{date:"1月/元旦"},{date:"2月"},{date:"3月"},{date:"4月/清明"},{date:"5月/五一"},{date:"6月"},{date:"7月"},{date:"8月"},{date:"9月"},{date:"10月/国庆"},{date:"11月"},{date:"12月"}]},o()(t,"left",0),o()(t,"discountNum",""),o()(t,"paginationShow",!0),o()(t,"pageIndex",1),o()(t,"chooseIndex",-1),t},components:{Head:p.a,Loading:h.a,LoadingImg:u.a,None:d.a,Detail:r.a,City:l.a,Map:c.a},watch:{content:function(){this.content||this.searchAll()},person:function(){this.person<17?this.searchAll():this.addClick=!0},date:function(){this.searchAll()},allprice:function(){this.searchAll()},tiyan:function(){this.searchAll()},closeIndex:function(){this.searchAll()},sliderIndex:function(){this.sliderIndex>0&&this.sliderIndex<this.localList.length-4?(this.isPrev=!0,this.isNext=!0):this.sliderIndex==this.localList.length-4?(this.isPrev=!0,this.isNext=!1):(this.isPrev=!1,this.isNext=!0)}},methods:{chooseDay:function(t,e){var i,a,n;i=(new Date).getFullYear(),this.chooseIndex==e?(this.chooseIndex=-1,a="",n=""):(11==e?(a=new Date(i,e,1).getTime()/1e3,n=new Date(i+1,0,0).getTime()/1e3):(a=new Date(i,e,1).getTime()/1e3,n=new Date(i,e+1,0).getTime()/1e3),this.chooseIndex=e),this.getAllHigh(this.price[0],this.price[1],a,n,this.tiyan,this.person,this.closeIndex)},chooseDis:function(t,e){t?(this.discountNum=t.price_discount,this.clickIndex=e):this.clickIndex=-1,this.searchAll()},go_right:function(){this.left-=110},go_left:function(){this.left+=110},checkXian:function(t){this.xianList=t},selectCountry:function(t){this.country=t,this.searchAll()},selectProvince:function(t){this.province=t,this.searchAll()},selectCity:function(t){this.city=t,this.searchAll()},selectXian:function(t){this.xian=t,this.searchAll()},moreActive:function(t,e){this.$router.push({path:"moreActive",query:{key:t.city,information:n()(t)}})},searchHome:function(){this.searchAll()},getVal:function(t){this.content=t},toptop:function(t){this.$router.push({path:"/classification",query:{information:t.value,name:t.title}})},getKind:function(){var t=this;this.$http.post(this.api+"/home/Kind/kindlist",{token:localStorage.getItem("token")}).then(function(e){if(1==e.data.code){var i=e.data.data,a=[],n=[];for(var s in i)a.push(i[s]);for(var o=0;o<a.length;o++)n.push({img:a[o].image_id?a[o].domain+a[o].image_url:"",title:a[o].kind_name,value:a[o].kind_id});t.searchList=n}else 3==e.data.code?t.$http.post(t.api+"/home/index/token").then(function(e){localStorage.setItem("token",e.data.data),t.getKind()}):alert(e.data.msg)})},toPublish:function(t,e){this.$router.push({path:"/publishPage",query:{information:t.activity_id}})},searchAll:function(){this.pageIndex=1,this.getAllHigh(this.price[0],this.price[1],this.date?this.date[0]/1e3:0,this.date?this.date[1]/1e3:0,this.tiyan,this.person,this.closeIndex)},toActivestep:function(){this.$router.push("/activeStep")},prevIndex:function(){this.sliderIndex-=1,this.left+=240},nextIndex:function(){this.sliderIndex+=1,this.left-=240},rejest:function(){this.price=[0,0]},show:function(){var t=this;this.$nextTick(function(){t.$refs.saveDateInput.focus()})},reduce:function(t,e){if(0==e){if(t.adult>0){this.addClick=!1,t.adult=t.adult-1;for(var i=0,a=0;a<this.otherList.length;a++)i+=this.otherList[a].adult;this.person=i}}else if(0!=t.adult){this.addClick=!1,t.adult=t.adult-1;for(var n=0,s=0;s<this.otherList.length;s++)n+=this.otherList[s].adult;this.person=n}else t.adult=0},add:function(t,e){if(this.person<16){this.addClick=!1,t.adult=t.adult+1;for(var i=0,a=0;a<this.otherList.length;a++)i+=this.otherList[a].adult;this.person=i}else this.addClick=!0},change:function(){this.closeIndex?this.closeIndex="":this.closeIndex=1},getHotPlace:function(){var t=this;this.$http.post(this.api+"/PopularCity",{token:localStorage.getItem("token")}).then(function(e){1==e.data.code?t.localList=e.data.data:3==e.data.code?t.$http.post(t.api+"/home/index/token").then(function(e){localStorage.setItem("token",e.data.data),t.getHotPlace()}):alert(e.data.msg)})},getAllHigh:function(t,e,i,a,n,s,o){var c=this;this.HighLoading=!0,this.hightList=[],this.$http.post(this.api+"/ActivityListUserTwo",{token:localStorage.getItem("token"),page:this.pageIndex,sort:1,price_low:t,price_high:e,keywords:this.content,activ_begin_time:i,activ_end_time:a,kind_id:n,max_person_num:s,is_volunteen:o,per_page:9,country:this.country?this.country[1]:"",province:this.province?this.province[1]:"",city:this.city?this.city[1]:"",region:this.xian?this.xian[1]:"",discount:this.clickIndex>=0?this.discountNum:""}).then(function(l){if(1==l.data.code){c.paginationShow=!0,c.hightList=l.data.data.data,c.total=l.data.data.total,c.HighLoading=!1;var r=[];c.hightList.forEach(function(t){r.push({point:[t.set_address_lng,t.set_address_lat],text:t.price})}),c.adreeList=r}else 3==l.data.code?c.$http.post(c.api+"/home/index/token").then(function(l){localStorage.setItem("token",l.data.data),c.getAllHigh(t,e,i,a,n,s,o)}):0==l.data.code&&(c.HighLoading=!1,c.$message({type:"error",message:l.data.data}))}).catch(function(t){c.HighLoading=!1})},getAllSJ:function(t){var e=this;this.isLoading=!0,this.$http.post(this.api+"/home/Activity/activ_list",{token:localStorage.getItem("token"),page:t}).then(function(i){1==i.data.code?(e.experList=i.data.data.data,e.isLoading=!1):3==i.data.code?e.$http.post(e.api+"/home/index/token").then(function(i){localStorage.setItem("token",i.data.data),e.getAllSJ(t)}):0==i.data.code&&alert(i.data.data)})},getDiscount:function(){var t=this;this.$http.post(this.api+"/DiscountTwo",{token:localStorage.getItem("token"),verson:2}).then(function(e){1==e.data.code?t.quchong(e.data.data):3==e.data.code?t.getDiscount():0==e.data.code&&t.$message({type:"error",messages:e.data.msg})})},quchong:function(t){for(var e=0;e<t.length;e++)for(var i=e+1;i<t.length;i++)t[e].price_discount===t[i].price_discount&&(t.splice(i,1),i--);this.discout=t},handleCurrentChange:function(t){this.pageIndex=t,this.paginationShow=!1,this.getAllHigh(),window.scroll(0,0)},chooseMoney:function(){this.allprice=this.price}},mounted:function(){window.scroll(0,0),this.getHotPlace(),this.getAllHigh(),this.getKind(),this.getDiscount()},created:function(){this.content=this.$route.query.information,this.$route.query.information&&(this.editSearch=this.$route.query.information),this.type=this.$route.query.type}}),g={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("Head",{attrs:{type:"experienceCentre",content:t.editSearch},on:{getVal:t.getVal,search:t.searchHome}}),t._v(" "),i("div",{staticClass:"flexBetween",staticStyle:{width:"98%","background-color":"#fff","border-top":"1px solid #eee",padding:"10px 1%",position:"fixed",top:"82px","z-index":"99",display:"flex","justify-content":"space-between","border-bottom":"1px solid #eee"}},[i("div",{staticClass:"flexStart"},[i("el-popover",{attrs:{placement:"bottom",width:"400",trigger:"click"},on:{show:t.show}},[i("el-date-picker",{ref:"saveDateInput",staticStyle:{"margin-left":"20px"},attrs:{"value-format":"timestamp","picker-options":t.pickerOptions2,type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}}),t._v(" "),i("el-button",{attrs:{slot:"reference",type:t.date?"primary":""},slot:"reference"},[t._v("日期")])],1),t._v(" "),i("el-popover",{staticStyle:{"margin-left":"10px"},attrs:{placement:"bottom",width:"350",trigger:"click"}},[t._l(t.otherList,function(e,a){return i("div",{staticStyle:{display:"flex","justify-content":"space-between",margin:"20px"}},[i("div",[i("b",[t._v(t._s(e.person))]),i("p",{staticStyle:{"font-size":"12px"}},[t._v(t._s(1==a?"2 - 12岁":2==a?"2岁以下":""))])]),t._v(" "),i("div",[i("el-button",{attrs:{icon:"el-icon-minus",size:"mini",circle:""},on:{click:function(i){t.reduce(e,a)}}}),t._v(" "),i("span",{staticStyle:{margin:"0 10px"}},[t._v(t._s(e.adult))]),t._v(" "),i("el-button",{attrs:{icon:"el-icon-plus",size:"mini",circle:"",disabled:t.addClick},on:{click:function(i){t.add(e,a)}}})],1)])}),t._v(" "),i("el-button",{attrs:{slot:"reference",type:t.person?"primary":""},slot:"reference"},[t._v(t._s(t.person?t.person+"人+":"体验人数"))])],2),t._v(" "),i("el-popover",{staticStyle:{"margin-left":"10px"},attrs:{placement:"bottom",trigger:"click"}},[i("div",{staticStyle:{"text-align":"center"}},[i("el-radio",{attrs:{label:"1",border:""},model:{value:t.tiyan,callback:function(e){t.tiyan=e},expression:"tiyan"}},[t._v("户外活动")])],1),t._v(" "),i("div",{staticStyle:{"text-align":"center"}},[i("el-radio",{attrs:{label:"2",border:""},model:{value:t.tiyan,callback:function(e){t.tiyan=e},expression:"tiyan"}},[t._v("少数民族")])],1),t._v(" "),i("div",{staticStyle:{"text-align":"center"}},[i("el-radio",{attrs:{label:"3",border:""},model:{value:t.tiyan,callback:function(e){t.tiyan=e},expression:"tiyan"}},[t._v("本土文化")])],1),t._v(" "),i("el-button",{attrs:{slot:"reference",type:t.tiyan.length?"primary":""},slot:"reference"},[t._v(t._s(1==t.tiyan?"户外活动":2==t.tiyan?"少数民族":3==t.tiyan?"本土文化":"体验类型"))])],1),t._v(" "),i("City",{staticStyle:{"margin-left":"10px"},attrs:{type:"3"},on:{selectXian:t.selectXian,checkXian:t.checkXian,selectCountry:t.selectCountry,selectProvince:t.selectProvince,selectCity:t.selectCity}}),t._v(" "),i("el-popover",{staticStyle:{"margin-left":"10px"},attrs:{placement:"bottom",width:"400",trigger:"click"}},[i("div",{staticStyle:{width:"350px","margin-left":"20px"}},[i("el-slider",{attrs:{range:"",max:4e3},model:{value:t.price,callback:function(e){t.price=e},expression:"price"}}),t._v(" "),i("div",{staticStyle:{display:"flex","justify-content":"space-between",margin:"20px 0"}},[i("span",[t._v("￥"+t._s(t.price[0]))]),t._v(" "),i("span",[t._v("￥"+t._s(4e3==t.price[1]?"4000+":t.price[1]))])])],1),t._v(" "),i("div",{staticStyle:{margin:"20px 20px 20px 12px",cursor:"pointer",display:"flex","justify-content":"space-between"}},[i("span",{on:{click:t.rejest}},[t._v("重置")]),i("span",{on:{click:function(e){t.chooseMoney(2)}}},[t._v("确定")])]),t._v(" "),i("el-button",{attrs:{slot:"reference",type:t.price[1]?"primary":""},slot:"reference"},[t._v("价格")])],1),t._v(" "),i("el-popover",{staticStyle:{"margin-left":"10px"},attrs:{placement:"bottom",width:"400",trigger:"click"}},[i("div",{staticStyle:{padding:"20px"}},[i("div",{staticStyle:{display:"flex","justify-content":"space-between",margin:"20px 0"}},[i("div",[i("h4",[t._v("是否需要志愿者")]),t._v(" "),i("p",[t._v("参与体验，帮助策划人与大家交流，沟通等")])]),t._v(" "),i("div",{staticStyle:{width:"70px"}},[i("div",{staticStyle:{transition:"width .5s",overflow:"hidden","border-top-right-radius":"20px","border-bottom-right-radius":"20px","border-top-left-radius":"20px","border-bottom-left-radius":"20px"},style:{width:t.closeIndex?"70px":"30px",backgroundColor:t.closeIndex?"#008489":"#fff"},on:{click:t.change}},[""==t.closeIndex?i("i",{staticClass:"el-icon-circle-close-outline",staticStyle:{"font-size":"30px",float:"left"}}):t._e(),t._v(" "),1==t.closeIndex?i("i",{staticClass:"el-icon-circle-check-outline",staticStyle:{"font-size":"30px","background-color":"#fff","border-radius":"50%",color:"#008489",float:"right"}}):t._e()])])])]),t._v(" "),i("el-button",{attrs:{slot:"reference",type:t.closeIndex?"primary":""},slot:"reference"},[t._v(t._s(1==t.closeIndex?"需要志愿者":"是否需要志愿者"))])],1)],1),t._v(" "),t.mapIndex?i("div",{staticStyle:{display:"flex","justify-content":"flex-end"}},[i("div",{staticStyle:{"margin-right":"10px","line-height":"40px"}},[t._v("\n        显示地图\n      ")]),t._v(" "),i("div",{staticStyle:{width:"70px","margin-top":"5px"}},[i("div",{staticStyle:{transition:"width .5s",overflow:"hidden","border-top-right-radius":"20px","border-bottom-right-radius":"20px","border-top-left-radius":"20px","border-bottom-left-radius":"20px"},style:{width:t.mapIndex?"70px":"30px",backgroundColor:t.mapIndex?"#008489":"#fff"},on:{click:t.Mwpchange}},[0==t.mapIndex?i("i",{staticClass:"el-icon-circle-close-outline",staticStyle:{"font-size":"30px",float:"left"}}):t._e(),t._v(" "),1==t.mapIndex?i("i",{staticClass:"el-icon-circle-check-outline",staticStyle:{"font-size":"30px","background-color":"#fff","border-radius":"50%",color:"#008489",float:"right"}}):t._e()])])]):t._e()]),t._v(" "),"allActive"==t.type?i("div",[i("div",{directives:[{name:"show",rawName:"v-show",value:!t.mapIndex,expression:"!mapIndex"}],staticClass:"content"},[i("h2",[t._v("为您推荐")]),t._v(" "),i("div",{staticClass:"content_margin flexStart"},t._l(t.localList,function(e,a){return i("div",{directives:[{name:"show",rawName:"v-show",value:a<6,expression:"index<6"}],staticClass:"content_list",on:{click:function(i){t.moreActive(e,a)}}},[i("div",[i("LoadingImg",{staticStyle:{width:"120px",height:"140px"},attrs:{type:"2",src:e.logo_image_url?e.logo_image_url:""}})],1),t._v(" "),i("div",{staticStyle:{position:"absolute",top:"0",left:"0",width:"120px",height:"140px",background:"rgba(0,0,0,0.4)","z-index":"1"}}),t._v(" "),i("div",{staticStyle:{"z-index":"2",color:"#fff","font-size":"12px","text-align":"center",position:"absolute",top:"48px",left:"35px"}},[i("p",[t._v(t._s(e.city))]),t._v(" "),i("p",[t._v(t._s(e.create_num)+"项体验")])])])}))]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:!t.mapIndex,expression:"!mapIndex"}],staticClass:"content_all"},[i("h2",[t._v("所有体验")]),t._v(" "),i("div",{staticStyle:{position:"relative",display:"flex","flex-wrap":"wrap","font-size":"12px"}},t._l(t.hightList,function(e,a){return i("div",{staticClass:"list"},[i("Detail",{attrs:{type:"active",data:e},on:{toPublish:function(i){t.toPublish(e,a)},consult:function(e){t.consult(a)}}})],1)}))])]):t._e(),t._v(" "),"youhui"==t.type?i("div",{staticClass:"content"},[i("h2",{staticStyle:{"font-size":"24px"}},[t._v("特惠体验")]),t._v(" "),i("div",{staticClass:"flexStart fontweight",staticStyle:{"margin-top":"20px","border-bottom":"1px solid #D5D8DD"}},[i("span",{staticClass:"marginR",style:{borderColor:-1==t.clickIndex?"#14C5CA":"#fff"},on:{click:function(e){t.chooseDis()}}},[t._v("节假日")]),t._v(" "),t._l(t.discout,function(e,a){return i("span",{staticClass:"marginR",style:{borderColor:t.clickIndex==a?"#14C5CA":"#fff"},on:{click:function(i){t.chooseDis(e,a)}}},[t._v("低至"+t._s(Number(e.price_discount))+"折")])})],2),t._v(" "),-1==t.clickIndex?i("div",{staticClass:"fontweight flexStart",staticStyle:{margin:"30px 0"}},[i("div",{staticStyle:{width:"990px",height:"60px","font-size":"14px",position:"relative",overflow:"hidden"}},[i("div",{staticClass:"flexStart",staticStyle:{position:"absolute",width:"1320px",transition:"all .3s linear"},style:{left:t.left+"px"}},t._l(t.holidayL,function(e,a){return i("div",{class:[t.chooseIndex==a?"holidayHove":"holidate"],on:{click:function(i){t.chooseDay(e,a)}}},[t._v("\n            "+t._s(e.date)+"\n            ")])}))]),t._v(" "),t.left<0?i("div",{staticStyle:{"margin-left":"20px","line-height":"40px"}},[i("el-button",{attrs:{icon:"el-icon-arrow-left",circle:"",size:"mini"},on:{click:t.go_left}})],1):t._e(),t._v(" "),t.left>-300?i("div",{staticStyle:{"margin-left":"20px","line-height":"40px"}},[i("el-button",{attrs:{icon:"el-icon-arrow-right",circle:"",size:"mini"},on:{click:t.go_right}})],1):t._e()]):t._e(),t._v(" "),i("div",{staticStyle:{display:"flex","flex-wrap":"wrap","font-size":"12px"}},t._l(t.hightList,function(e,a){return i("div",{staticClass:"list"},[i("Detail",{attrs:{type:"active",data:e},on:{toPublish:function(i){t.toPublish(e,a)},consult:function(e){t.consult(a)}}})],1)}))]):t._e(),t._v(" "),t.hightList.length?t._e():i("div",[i("None",{attrs:{type:"local"}})],1),t._v(" "),i("div",{staticStyle:{margin:"20px 0"}},[i("el-pagination",{directives:[{name:"show",rawName:"v-show",value:t.paginationShow,expression:"paginationShow"}],attrs:{"current-page":t.pageIndex,"page-size":9,layout:"total, prev, pager, next",total:t.total},on:{"current-change":t.handleCurrentChange}})],1),t._v(" "),t.isLoading||t.HighLoading?i("div",{staticStyle:{"text-align":"center",position:"fixed",top:"0",left:"0",right:"0",bottom:"0","background-color":"rgba(255,255,255,.5)"}},[i("Loading",{staticStyle:{position:"absolute",top:"50%",left:"50%","margin-left":"-25px","margin-top":"-25px"}})],1):t._e()],1)},staticRenderFns:[]};var v=i("VU/8")(f,g,!1,function(t){i("4TLW")},"data-v-7aa68c9f",null);e.default=v.exports},"4TLW":function(t,e){},bOdI:function(t,e,i){"use strict";e.__esModule=!0;var a,n=i("C4MV"),s=(a=n)&&a.__esModule?a:{default:a};e.default=function(t,e,i){return e in t?(0,s.default)(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}}});
//# sourceMappingURL=23.030c22d25439fda8f99c.js.map