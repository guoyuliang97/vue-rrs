webpackJsonp([30],{NjA7:function(t,e){},rctP:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("/nBy"),i=n("a20G"),o=n("Lt3X"),s=(n("uTVu"),o.a,i.a,a.a,{name:"friendsNotice",data:function(){return{api:this.GLOBAL.baseURL,friendList:[],noThing:"",total:0,isLoading:!1}},components:{Person:o.a,None:i.a,Loading:a.a},methods:{handleCurrentChange:function(t){this.getFrideng(t)},agree:function(t,e){this.$http.post(this.api+"/home/Friend/agree",{token:localStorage.getItem("token"),notice_id:t.notice_id,status:1}).then(function(e){1==e.data.code?(t.isShow=!t.isShow,t.activeIndex=1):(e.data.code,alert(e.data.msg))})},refuse:function(t,e){var n=this;this.$http.post(this.api+"/home/Friend/agree",{token:localStorage.getItem("token"),notice_id:t.notice_id,status:2}).then(function(a){1==a.data.code?(t.isShow=!t.isShow,t.activeIndex=2):3==a.data.code?n.$http.post(n.api+"/home/index/token").then(function(a){localStorage.setItem("token",a.data.data),n.refuse(t,e)}):0==a.data.code&&alert(a.data.msg)})},ignore:function(t,e){var n=this;this.$http.post(this.api+"/home/Friend/agree",{token:localStorage.getItem("token"),notice_id:t.notice_id,status:3}).then(function(a){1==a.data.code?(t.isShow=!t.isShow,n.friendList.splice(e,1)):3==a.data.code?n.$http.post(n.api+"/home/index/token").then(function(a){localStorage.setItem("token",a.data.data),n.ignore(t,e)}):0==a.data.code&&alert(a.data.msg)})},toPerson:function(t,e){this.$router.push({path:"/userdata",query:{information:t.userId}})},getFrideng:function(t){var e=this;this.isLoading=!0,this.$http.post(this.api+"/home/Friend/getlist",{token:localStorage.getItem("token"),page:t}).then(function(n){if(1==n.data.code){var a=n.data.data.data;if(a.length){for(var i=[],o=0;o<a.length;o++){var s="";s=a[o].fuser.head_image?a[o].fuser.headimage.domain+a[o].fuser.headimage.image_url:"../../../static/img/static/user.png",0==a[o].status?i.push({imgUrl:s,name:a[o].fuser.family_name+a[o].fuser.middle_name+a[o].fuser.name,content:a[o].msg,isShow:!0,userId:a[o].fuser.user_id,activeIndex:a[o].status,notice_id:a[o].notice_id}):i.push({imgUrl:s,name:a[o].fuser.family_name+a[o].fuser.middle_name+a[o].fuser.name,content:a[o].msg,isShow:!1,userId:a[o].fuser.user_id,activeIndex:a[o].status,notice_id:a[o].notice_id})}e.friendList=i}else e.noThing="暂无数据";e.isLoading=!1}else 3==n.data.code?e.$http.post(e.api+"/home/index/token").then(function(n){localStorage.setItem("token",n.data.data),e.getFrideng(t)}):0==n.data.code&&(e.isLoading=!1,alert(n.data.msg))})}},mounted:function(){this.getFrideng(1)}}),r={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._l(t.friendList,function(e,a){return n("div",{staticStyle:{"text-align":"left","margin-bottom":"20px","border-bottom":"1px solid #eee"}},[n("Person",{attrs:{type:"9",imgUrl:e.imgUrl,name:e.name?e.name:"匿名用户",content:e.content,activeIndex:e.activeIndex,isShow:e.isShow},on:{toPerson:function(n){t.toPerson(e,a)},agree:function(n){t.agree(e,a)},refuse:function(n){t.refuse(e,a)},ignore:function(n){t.ignore(e,a)}}})],1)}),t._v(" "),t.friendList.length?t._e():n("None",{attrs:{type:"message"}}),t._v(" "),n("div",{staticStyle:{margin:"20px 0","text-align":"center"}},[n("el-pagination",{attrs:{"page-size":10,layout:"total, prev, pager, next",total:t.total},on:{"current-change":t.handleCurrentChange}})],1),t._v(" "),t.isLoading?n("div",{staticStyle:{position:"fixed",top:"0",left:"0",right:"0",bottom:"0","z-index":"999","background-color":"rgba(255,255,255,.8)",display:"flex","justify-content":"center","align-items":"center"}},[n("Loading")],1):t._e()],2)},staticRenderFns:[]};var d=n("VU/8")(s,r,!1,function(t){n("NjA7")},"data-v-eaff0cb0",null);e.default=d.exports}});
//# sourceMappingURL=30.8a1c9c8c966678645f07.js.map