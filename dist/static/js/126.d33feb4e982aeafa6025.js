webpackJsonp([126],{p0wv:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s("mvHQ"),a=s.n(i),n=s("ZKg9"),o=s("/nBy"),r=s("DjrJ"),d=(r.a,o.a,n.a,{name:"playerReturn",data:function(){return{api:this.GLOBAL.baseURL,index:1,options:[{label:"全退",value:1}],value:1,reson:"",houseList:[],house:"",order_id:"",isLoading:!1}},components:{Head:r.a,Loading:o.a,LoadingImg:n.a},methods:{goBack:function(){this.$router.go(-1)},sendRefund:function(){var e=this;if(this.reson)if(this.isLoading=!0,this.house.is_refund){for(var t=[],s=[],i=0,n=0,o=0;o<this.house.house.length;o++)t.push({oh_id:this.house.house[o].oh_id,num:this.house.house[o].num});for(var r=0;r<this.house.detail.length;r++)"1"==this.house.detail[r].type||"2"==this.house.detail[r].type?s.push(this.house.detail[r].combine_id):(i+=Number(this.house.detail[r].adult),n+=Number(this.house.detail[r].kids));this.$http.post(this.api+"/RefundSTwo",{token:localStorage.getItem("token"),order_id:this.house.order_id,person_num:i,house:a()(t),combine:a()(s),reason:this.reson,flag:0,type:1,kids_num:n}).then(function(t){1==t.data.code?(e.$message({type:"success",message:"退款成功！"}),e.isLoading=!1,e.goBack()):3==t.data.code?e.sendRefund():0==t.data.code&&(e.isLoading=!1,e.$message({type:"error",messages:t.data.msg}))})}else this.$http.post(this.api+"/RefundSTwo",{token:localStorage.getItem("token"),order_id:this.house.order_id,reason:this.reson,flag:1,type:1}).then(function(t){1==t.data.code?(e.index=2,e.isLoading=!1):3==t.data.code?e.$http.post(e.api+"/home/index/token").then(function(t){localStorage.setItem("token",t.data.data),e.sendRefund()}):0==t.data.code&&(alert(t.data.msg),e.isLoading=!1)});else this.$message({type:"error",message:"请填写退款理由!"})},getOrder:function(){var e=this;this.isLoading=!0,this.$http.post(this.api+"/OrderRefundDTwo",{token:localStorage.getItem("token"),order_id:this.order_id,verson:2}).then(function(t){1==t.data.code?(e.house=t.data.data,e.isLoading=!1):3==t.data.code?e.getOrder():0==t.data.code&&(alert(t.data.msg),e.isLoading=!1)})}},mounted:function(){this.getOrder()},created:function(){this.order_id=this.$route.query.information}}),l={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticStyle:{"text-align":"left"}},[s("Head",{attrs:{type:"refundDescirbe"}}),e._v(" "),e.house?s("div",{staticClass:"fontweight ",staticStyle:{"background-color":"#fff","font-size":"16px",padding:"20px",width:"1080px",margin:"85px auto"}},[s("p",{staticClass:"contentTitle"},[e._v("我的活动  > 查看预订>主动退款")]),e._v(" "),s("div",{staticClass:"flexBetween"},[s("p",{staticClass:"fontweight marginT"},[e._v("我退款给")]),e._v(" "),s("el-button",{staticStyle:{width:"50px",height:"50px"},attrs:{icon:"el-icon-arrow-left",circle:""},on:{click:e.goBack}})],1),e._v(" "),s("div",{staticClass:"flexStart marginT"},[s("LoadingImg",{staticStyle:{width:"92.04px",height:"92.04px"},attrs:{type:"user",src:e.house.user.head_image?e.house.user.headimage.domain+e.house.user.headimage.image_url:""}}),e._v(" "),s("div",{staticStyle:{"margin-left":"10px","line-height":"92px","font-size":"29px"}},[s("b",[e._v(e._s(e.house.user.family_name+e.house.user.middle_name+e.house.user.name?e.house.user.family_name+e.house.user.middle_name+e.house.user.name:"匿名用户"))])])],1),e._v(" "),s("div",{staticStyle:{"margin-top":"25px"}},[s("p",[e._v("参与人数："+e._s(e.house.num)+"人")]),e._v(" "),s("p",{staticClass:"marginT"},[e._v("预定时间："+e._s(e.house.activ_begin_time)+"—"+e._s(e.house.activ_end_time))])]),e._v(" "),s("hr",{staticClass:"lineS"}),e._v(" "),s("div",{staticClass:"flexStart"},[s("div",[e._v("价格详情：")]),e._v(" "),e.house.detail.length?s("div",e._l(e.house.detail,function(t,i){return s("div",{staticClass:"marginTop"},["1"==t.type||"2"==t.type?s("div",[e._v("\n            "+e._s("1"==t.type?"亲子":t.name)),s("span",{staticClass:"marginLeft"}),e._v(e._s(t.adult)+"成人"),"1"==t.type?s("span",[e._v(e._s(t.kids)+"儿童")]):e._e(),e._v(" "),s("span",{staticClass:"marginLeft"}),e._v("¥"+e._s(t.price)+"\n          ")]):e._e(),e._v(" "),"0"==t.type?s("div",[t.adult?s("div",{staticClass:"marginTop"},[e._v("标准"),s("span",{staticClass:"marginLeft"}),e._v(e._s(t.adult)+"人"),s("span",{staticClass:"marginLeft"}),e._v("¥"+e._s(t.adult_price))]):e._e(),e._v(" "),t.kids?s("div",[e._v("儿童"),s("span",{staticClass:"marginLeft"}),e._v(e._s(t.kids)+"人"),s("span",{staticClass:"marginLeft"}),e._v("¥"+e._s(t.kids_price))]):e._e()]):e._e()])})):e._e(),e._v(" "),e.house.detail.length?e._e():s("div",[e._v("\n        无\n      ")])]),e._v(" "),s("div",{staticClass:"flexStart marginT"},[s("div",[e._v("预订住宿：")]),e._v(" "),e.house.house.length?s("div",e._l(e.house.house,function(t,i){return s("p",{staticClass:"marginTop"},[s("span",[e._v(e._s(t.title))]),e._v(" "),s("span",{staticClass:"marginLeft"}),e._v(" "),s("span",[e._v("房数"),s("i",{staticClass:"el-icon-close"}),e._v(e._s(t.num))]),e._v(" "),s("span",{staticClass:"marginLeft"}),e._v(" "),s("span",[e._v("总额￥ "+e._s(t.price))])])})):e._e(),e._v(" "),e.house.house.length?e._e():s("div",[e._v("无")])]),e._v(" "),s("hr",{staticClass:"lineS"}),e._v(" "),s("div",{staticClass:"flexStart marginT"},[s("p",[e._v("退款方式："),s("span",[e._v(e._s(e.house.is_refund?"非全款退":"全款退"))])])]),e._v(" "),s("div",{staticClass:"flexStart marginT"},[s("div",{staticStyle:{"line-height":"40px"}},[e._v("退款原因：")]),e._v(" "),s("div",{staticStyle:{"margin-left":"9px"}},[s("el-input",{staticStyle:{width:"410px"},attrs:{type:"textarea",rows:4},model:{value:e.reson,callback:function(t){e.reson=t},expression:"reson"}})],1)]),e._v(" "),s("hr",{staticClass:"lineS"}),e._v(" "),s("div",{staticClass:" marginT"},[s("p",[e._v("基金抵扣   "+e._s(e.house.balance))])]),e._v(" "),s("div",{staticClass:" marginT"},[s("p",[e._v("支付总额   ￥"+e._s(e.house.pay_price))])]),e._v(" "),s("div",{staticClass:"marginT"},[s("p",[e._v("退款时间   "+e._s(e.house.create_time))])]),e._v(" "),s("div",{staticClass:"marginT"},[s("p",[e._v("订单编号   "+e._s(e.house.order_no))])]),e._v(" "),s("hr",{staticClass:"lineS"}),e._v(" "),s("div",{staticClass:"flexEnd"},[s("div",{staticStyle:{color:"#999","font-size":"13px","line-height":"28px",cursor:"pointer"},on:{click:e.goBack}},[e._v("取消退款")]),e._v(" "),s("el-button",{staticStyle:{"margin-left":"20px",border:"1px solid rgba(102,102,102,1)"},attrs:{size:"mini"},on:{click:e.sendRefund}},[e._v("提交申请")])],1)]):e._e(),e._v(" "),e.isLoading?s("div",{staticStyle:{position:"fixed",top:"0",left:"0",right:"0",bottom:"0","z-index":"999","background-color":"rgba(255,255,255,.8)",display:"flex","justify-content":"center","align-items":"center"}},[s("Loading")],1):e._e()],1)},staticRenderFns:[]};var _=s("VU/8")(d,l,!1,function(e){s("vBgV")},"data-v-1b920e75",null);t.default=_.exports},vBgV:function(e,t){}});
//# sourceMappingURL=126.d33feb4e982aeafa6025.js.map