webpackJsonp([15],{Qrma:function(t,e){},VmfH:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("Xxa5"),n=a.n(i),s=a("exGp"),r=a.n(s),o=a("/nBy"),c=a("DjrJ"),l=a("7+uW"),p=a("sbrb"),h=a.n(p);l.default.use(h.a);c.a,o.a;l.default.use(h.a);var d={data:function(){return{api:this.GLOBAL.baseURL,updata:{token:localStorage.getItem("token")},imgUrl:"",interInvite:"",emailInvite:"",WXurl:"",shreList:[{img:"../../static/img/static/tran/weixin.png",name:"微信"},{img:"../../static/img/static/tran/weibo.png",name:"微博"},{img:"../../static/img/static/tran/youx.png",name:"邮箱"},{img:"../../static/img/static/tran/copy.png",name:"复制连接"}],clickIndex:0,shareContent:"",user:"",cover_image:[],YXnumber:"",imageUrl:"",editSearch:"搜索",asd:"",radio:"",reacetWho:"",emailCenter:"",isLoading:!1,param:"",index:0,height:""}},components:{Head:c.a,Loading:o.a},methods:{goShare:function(){var t=document.getElementById("shareLocal").offsetTop;document.documentElement.scrollTop=t},getImg:function(){localStorage.getItem("userImg")?this.imgUrl=localStorage.getItem("userImg"):this.imgUrl="../../static/img/static/user.png"},getEWM:function(){var t=this;this.$http.post(this.api+"/home/Upload/getqrcode",{token:localStorage.getItem("token"),url:this.asd}).then(function(e){1==e.data.code&&(t.WXurl=e.data.data.src)})},chooseShare:function(t,e){this.clickIndex!=e&&(this.clickIndex=e)},share:function(t){var e=this;if(1==t){var a={url:this.asd,title:this.shareContent,pic:this.imageUrl,language:"zh_cn"},i=[];for(var n in a)i.push(n+"="+encodeURIComponent(a[n]||""));var s="http://service.weibo.com/share/share.php?"+i.join("&");window.open(s)}else{/^([a-zA-Z]|[0-9])(\w|\-)+@[a-zA-Z0-9]+\.([a-zA-Z]{2,4})$/.test(this.reacetWho)?this.$http.post(this.api+"/EmailShare",{token:localStorage.getItem("token"),toemail:this.reacetWho,title:this.emailCenter,content:this.shareContent,url:this.asd}).then(function(a){1==a.data.code?(e.$message({type:"success",message:"分享成功"}),e.reacetWho="",e.emailCenter="",e.shareContent=""):3==a.data.code?e.share(t):alert(a.data.msg)}):this.$message({type:"info",message:"请输入正确邮箱"})}},reload:function(t){this.user=t.data.data[0],this.asd=location.origin+"/share?userId="+t.data.data[0].user_id,this.getEWM()},handleAvatarSuccess:function(t,e){this.imageUrl=t.data.domain+t.data.image_url},beforeAvatarUpload:function(t){var e="jpg"===t.type||"jpeg",a=t.size/1024/1024<5;return e||this.$message.error("上传头像图片只能是 JPG/PNG 格式!"),a||this.$message.error("上传头像图片大小不能超过 5MB!"),e&&a},searchHome:function(){this.$router.push({name:"homeSearch",query:{key:this.content,type:0}})},getVal:function(t){this.content=t},toYUedu:function(){this.$router.push("/policy")},onCopy:function(){this.$message({message:"复制成功！",type:"success"})},onError:function(){this.$message({message:"复制失败！",type:"error"})},seletI:function(t){var e=this;return r()(n.a.mark(function a(){return n.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return e.isLoading=!0,a.next=3,e.xunhuan(t);case 3:case"end":return a.stop()}},a,e)}))()},xunhuan:function(t){var e=this;return r()(n.a.mark(function a(){var i;return n.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(i=new FormData,!t.target.files.length){a.next=10;break}if(!(t.target.files.length>10)){a.next=9;break}return e.$message({type:"info",message:"最多一次上传10张!"}),e.isLoading=!1,e.$refs.file.value="",a.abrupt("return",!1);case 9:e.panduan(t.target.files,i);case 10:case"end":return a.stop()}},a,e)}))()},panduan:function(t,e){var a=null,i=this;if(i.index==t.length)return i.index=0,i.param=e,void i.upload();var n=t[this.index];if(!("image/jpeg"===n.type||"image/jpg"===n.type||"image/png"===n.type))return alert("请上传图片格式IPEG/PNG/JPG"),i.isLoading=!1,!1;h.a.getData(n,function(){h.a.getAllTags(this),a=h.a.getTag(this,"Orientation")});var s=new FileReader;s.onload=function(n){var s=new Image;s.src=n.target.result,s.onload=function(){var n=this.naturalWidth,s=this.naturalHeight,r=document.createElement("canvas"),o=r.getContext("2d");r.width=n,r.height=s,o.drawImage(this,0,0,n,s);var c=null;if(""!=a&&1!=a){switch(a){case 6:i.rotateImg(this,"left",r);break;case 8:i.rotateImg(this,"right",r);break;case 3:i.rotateImg(this,"turntwo",r)}c=r.toDataURL("image/jpeg",.8),e.append("file[]",c)}else c=r.toDataURL("image/jpeg",.8),e.append("file[]",c);i.index++,i.panduan(t,e)}},s.readAsDataURL(n)},rotateImg:function(t,e,a){if(null!=t){var i=t.height,n=t.width,s=2;null==s&&(s=0),"right"==e?++s>3&&(s=0):--s<0&&(s=3);var r=90*s*Math.PI/180,o=a.getContext("2d");switch(s){case 0:a.width=n,a.height=i,o.drawImage(t,0,0);break;case 1:a.width=i,a.height=n,o.rotate(r),o.drawImage(t,0,-i);break;case 2:a.width=n,a.height=i,o.rotate(r),o.drawImage(t,-n,-i);break;case 3:a.width=i,a.height=n,o.rotate(r),o.drawImage(t,-n,0)}}},upload:function(){var t=this;this.param.append("token",localStorage.getItem("token")),this.$http.post(this.api+"/home/Upload/upload_many",this.param).then(function(e){if(1==e.data.code){for(var a=e.data.data,i=0;i<a.length;i++)t.imageUrl=a[i].domain+a[i].image_url;t.$refs.file.value="",t.isLoading=!1}else 3==e.data.code?t.upload():0==e.data.code&&(alert(e.data.msg),t.isLoading=!1,t.$refs.file.value="")}).catch(function(e){t.$refs.file.value="",t.isLoading=!1})},getHeight:function(){var t=document.documentElement.clientHeight;this.height=t}},mounted:function(){this.getImg(),this.getHeight()}},g={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"travelfunds"},[a("Head",{attrs:{type:"edit",content:t.editSearch},on:{reload:t.reload,getVal:t.getVal,search:t.searchHome}}),t._v(" "),a("div",{staticClass:"funds_con flexCenter",style:{height:t.height+"px"}},[a("div",{staticStyle:{display:"flex","justify-content":"space-around"}},[a("div",[t._m(0),t._v(" "),t._m(1),t._v(" "),a("div",{staticClass:"mainButton",staticStyle:{"font-size":"24px",padding:"19px 44px","border-radius":"8px"},on:{click:t.goShare}},[t._v("立即分享")])]),t._v(" "),t._m(2)])]),t._v(" "),a("div",{staticStyle:{"align-items":"center",width:"1035px",margin:"20px auto",display:"flex","justify-content":"space-between"},style:{height:t.height+"px"}},[a("div",{staticStyle:{width:"603px","text-align":"left"}},[a("h2",{attrs:{id:"shareLocal"}},[t._v("分享方式")]),t._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"space-between","margin-top":"30px"}},t._l(t.shreList,function(e,i){return a("div",{staticStyle:{position:"relative"}},[a("img",{staticStyle:{width:"50px",height:"50px","margin-left":"5px"},attrs:{src:e.img}}),t._v(" "),i<3?a("div",{staticStyle:{display:"flex","justify-content":"flex-start","margin-top":"15px"}},[a("div",{staticStyle:{width:"15px",height:"15px","border-radius":"50%",border:"1px solid #14c5ca",display:"flex","justify-content":"center","align-items":"center","margin-top":"3px",cursor:"pointer"},on:{click:function(a){t.chooseShare(e,i)}}},[a("div",{staticStyle:{width:"10px",height:"10px","border-radius":"50%"},style:{backgroundColor:t.clickIndex==i?"#14c5ca":"#fff"}})]),t._v(" "),a("div",{staticStyle:{"margin-left":"10px"}},[t._v("\n                "+t._s(e.name)+"\n              ")])]):t._e(),t._v(" "),3==i?a("div",[a("button",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t.asd,expression:"asd",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],staticStyle:{position:"absolute",width:"70px",bottom:"0",left:"-5px",border:"none","margin-top":"12px",padding:"2px 5px","background-color":"#F0F0F0",cursor:"pointer"}},[t._v("\n                复制链接\n              ")])]):t._e()])})),t._v(" "),a("div",[0==t.clickIndex?a("div",{staticStyle:{display:"flex","justify-content":"flex-start","margin-top":"50px"}},[a("div",{staticStyle:{width:"200px"}},[a("p",{staticClass:"funds_sharetxt"},[t._v("第1步 微信扫描二维码")]),t._v(" "),a("img",{staticStyle:{"margin-top":"10px"},attrs:{src:t.WXurl,width:"200px"}})]),t._v(" "),t._m(3)]):t._e(),t._v(" "),1==t.clickIndex?a("div",{staticStyle:{"margin-top":"50px"}},[a("p",{staticStyle:{margin:"20px 0"}},[t._v("说说你想分享的内容：")]),t._v(" "),a("el-input",{attrs:{type:"textarea",autosize:{minRows:5},placeholder:"说说你要分享的内容"},model:{value:t.shareContent,callback:function(e){t.shareContent=e},expression:"shareContent"}}),t._v(" "),a("el-button",{staticStyle:{"margin-top":"20px"},attrs:{type:"primary"},on:{click:function(e){t.share(1)}}},[t._v("分享")])],1):t._e(),t._v(" "),2==t.clickIndex?a("div",{staticStyle:{"margin-top":"50px"}},[a("div",{staticStyle:{display:"flex","justify-content":"flex-start",margin:"20px 0"}},[a("p",{staticStyle:{width:"100px","line-height":"40px"}},[t._v("收件人：")]),a("el-input",{attrs:{placeholder:""},model:{value:t.reacetWho,callback:function(e){t.reacetWho=e},expression:"reacetWho"}})],1),t._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"flex-start",margin:"20px 0"}},[a("p",{staticStyle:{width:"100px","line-height":"40px"}},[t._v("邮件主题：")]),a("el-input",{attrs:{placeholder:""},model:{value:t.emailCenter,callback:function(e){t.emailCenter=e},expression:"emailCenter"}})],1),t._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"flex-start",margin:"20px 0"}},[a("p",{staticStyle:{width:"100px","line-height":"40px"}},[t._v("邮件内容：")]),t._v(" "),a("el-input",{attrs:{type:"textarea",autosize:{minRows:5},placeholder:"说说你要分享的内容"},model:{value:t.shareContent,callback:function(e){t.shareContent=e},expression:"shareContent"}})],1),t._v(" "),a("el-button",{staticStyle:{"margin-top":"20px"},attrs:{type:"primary"},on:{click:t.share}},[t._v("分享")])],1):t._e()])]),t._v(" "),a("div")]),t._v(" "),t.isLoading?a("div",{staticStyle:{position:"fixed",top:"0",left:"0",right:"0",bottom:"0","z-index":"990","background-color":"rgba(255,255,255,.8)",display:"flex","justify-content":"center","align-items":"center"}},[a("div",[a("Loading"),t._v(" "),a("p",[t._v("上传中")])],1)]):t._e()],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"funds_container"},[e("p",[this._v("邀请新用户注册Allptp")]),this._v(" "),e("p",{staticStyle:{"margin-top":"11px"}},[this._v("你将获得¥25基金")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"funds_two"},[e("p",[this._v("当任何用户通过您的分享链接注册成功，则该用户会成为您的亲密好友。")]),this._v(" "),e("p",[this._v("该亲密好友只要在我们平台上预定了任何体验活动，您不但可以得到25元的基金而且还\n              可以得到平台对该体验活动收取的10%服务费中的20%提成。")]),this._v(" "),e("p",[this._v("该基金必须在您的亲密好友参加过他所预定的活动后，这些基金才会出现在您账户\n              可用余额上，该活动未结束前这笔基金为不可用余额。\n              该余额可以用于提现和在本平台上消费使用。")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"flexCenter",staticStyle:{"margin-left":"47px"}},[e("img",{attrs:{src:a("pcom"),width:"570px",height:"381px"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticStyle:{width:"200px","margin-left":"50px"}},[e("p",{staticClass:"funds_sharetxt"},[this._v("第2步 点击···分享页面")]),this._v(" "),e("p",[e("img",{staticStyle:{width:"130px","margin-top":"10px"},attrs:{alt:"",src:"https://z1.muscache.cn/airbnb/static/referrals/wechat_share/step-image-sm-a1929a67bf7c1e4b31c1b77549702c35.png"}})])])}]};var u=a("VU/8")(d,g,!1,function(t){a("Qrma")},null,null);e.default=u.exports},pcom:function(t,e,a){t.exports=a.p+"static/img/transct.b294739.png"}});
//# sourceMappingURL=15.e7dc1236b97672aba8f6.js.map