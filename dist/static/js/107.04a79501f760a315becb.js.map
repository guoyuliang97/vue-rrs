{"version":3,"sources":["webpack:///./src/components/edit/editphoto.vue","webpack:///./src/components/edit/editphoto.vue?0301","webpack:///./src/components/edit/editphoto.vue?ae9d"],"names":["edit_editphoto","data","api","this","GLOBAL","baseURL","imgUrl","isSuccess","isUpload","upData","token","localStorage","getItem","methods","handleAvatarSuccess","res","file","URL","createObjectURL","raw","setItem","domain","image_url","savePhoto","_this2","$http","post","head_image","image_id","then","code","Bus","$emit","alert","msg","beforeAvatarUpload","isJPG","type","isLt5M","size","$message","error","uploadProgress","delPhoto","_this3","$confirm","confirmButtonText","cancelButtonText","removePhoto","catch","message","_this4","mounted","_this5","headimage","$router","push","removeItem","components_edit_editphoto","render","_vm","_h","$createElement","_c","_self","staticClass","_m","_v","style","backgroundImage","backgroundSize","directives","name","rawName","value","expression","staticStyle","position","top","right","bottom","left","background-color","z-index","line-height","color","font-size","cursor","on","click","attrs","action","show-file-list","on-success","before-upload","on-progress","src","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/107.04a79501f760a315becb.js","sourcesContent":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n  import Bus from '../../assets/eventBus'\n\texport default {\n\t\tdata() {\n\t\t\treturn {\n        api:this.GLOBAL.baseURL,\n\t\t\t\timgUrl:\"../../../static/img/static/user.png\",\n\t\t\t\tisSuccess:false,\n\t\t\t\tisUpload:false,\n        upData:{\n          token:localStorage.getItem('token')\n        }\n\t\t\t};\n\t\t},\n\t\tmethods:{\n\t\t\thandleAvatarSuccess(res, file){\n\t\t\t\tthis.imgUrl = URL.createObjectURL(file.raw);\n        localStorage.setItem('userImg',res.data.domain+res.data.image_url)\n        this.savePhoto(res)\n\t\t\t},\n      savePhoto(res){\n        this.$http.post(this.api + '/home/User/saveuser',{\n          token: localStorage.getItem('token'),\n          head_image: res.data.image_id\n        })\n          .then(res=>{\n            if(res.data.code  == 1){\n              Bus.$emit('userImage',this.imgUrl )\n            }else if(res.data.code == 3){\n              this.$http.post(this.api + '/home/index/token')\n                .then(res=>{\n                  localStorage.setItem('token',res.data.data)\n                  this.savePhoto()\n                })\n            }else{\n              alert(res.data.msg)\n            }\n          })\n      },\n\t\t\tbeforeAvatarUpload(file){\n        const isJPG = file.type === 'image/jpeg' || file.type === 'image/png';\n        const isLt5M = file.size / 1024 / 1024 < 5;\n\n        if(!isJPG){\n          this.$message.error('上传照片只能是jpg/png格式');\n        }\n        if(!isLt5M){\n          this.$message.error('上传图片大小不能超过5M');\n        }\n        return isJPG && isLt5M\n\t\t\t},\n\t\t\tuploadProgress(){\n        this.isSuccess=true;\n        this.isUpload=false\n\t\t\t},\n\t\t\tdelPhoto(){\n\t\t\t\tif(this.imgUrl!=\"../../../static/img/static/user.png\"){\n\t\t\t\t\tthis.$confirm('确定要删除此照片?', '提示', {\n\t\t\t\t\tconfirmButtonText: '确定',\n\t\t\t\t\tcancelButtonText: '取消',\n\t\t\t\t\ttype: 'warning'\n\t\t\t\t\t}).then(() => {\n\t\t\t\t\t this.removePhoto()\n\t\t\t\t\t}).catch(() => {\n\t\t\t\t\tthis.$message({\n\t\t\t\t\t\ttype: 'info',\n\t\t\t\t\t\tmessage: '已取消删除'\n\t\t\t\t\t});          \n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t},\n      removePhoto(){\n        this.$http.post(this.api + '/home/User/saveuser',{\n          token: localStorage.getItem('token'),\n          head_image:''\n        }).then(res=>{\n          if(res.data.code == 1){\n            this.imgUrl =\"../../../static/img/static/user.png\"\n            this.$message({\n              type: 'success',\n              message: '删除成功!'\n            });\n          }else if(res.data.code == 3){\n            this.$http.post(this.api + '/home/index/token')\n              .then(res=>{\n                localStorage.setItem('token',res.data.data)\n                this.removePhoto()\n              })\n          }else{\n            alert(res.data.msg)\n          }\n        })\n      },\n\t\t},\n    mounted(){\n\t\t  let _this = this\n      this.$http.post(_this.api + '/home/User/get_user',{\n        token: localStorage.getItem('token')\n      })\n        .then(res=>{\n          if(res.data.code == 1){\n            if(res.data.data[0].headimage){\n              this.imgUrl = res.data.data[0].headimage.domain + res.data.data[0].headimage.image_url\n            }else{\n              this.imgUrl = '../../../static/img/static/user.png'\n            }\n          }else if(res.data.code == 3){\n            this.$router.push('/')\n            localStorage.removeItem('isLogin')\n          }else{\n            this.$router.push('/')\n            localStorage.removeItem('isLogin')\n          }\n        })\n        .catch(error=>{\n          alert(error)\n        })\n    }\n\t}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/edit/editphoto.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"mandatory\"},[_vm._m(0),_vm._v(\" \"),_c('div',{staticClass:\"edit_datacon\"},[_c('div',{staticClass:\"editphoto_con\",style:({backgroundImage:'url('+_vm.imgUrl+')',backgroundSize:'100% 100%'})},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isUpload&&!_vm.isSuccess),expression:\"isUpload&&!isSuccess\"}],staticStyle:{\"position\":\"absolute\",\"top\":\"0\",\"right\":\"0\",\"bottom\":\"0\",\"left\":\"0\",\"background-color\":\"rgba(0,0,0,.6)\",\"z-index\":\"99\",\"line-height\":\"180px\",\"color\":\"#008489\",\"font-size\":\"24px\"}},[_c('i',{staticClass:\"el-icon-loading\"})]),_vm._v(\" \"),_c('p',{staticClass:\"fontweight\",staticStyle:{\"position\":\"absolute\",\"top\":\"2px\",\"right\":\"2px\",\"color\":\"#333333\",\"font-size\":\"18px\",\"z-index\":\"98\",\"cursor\":\"pointer\"},on:{\"click\":_vm.delPhoto}},[_c('i',{staticClass:\"el-icon-delete\"})]),_vm._v(\" \"),_c('div',{staticStyle:{\"position\":\"absolute\",\"left\":\"0\",\"right\":\"0\",\"top\":\"0\",\"bottom\":\"0\",\"background-color\":\"rgba(255,255,255,.5)\"}}),_vm._v(\" \"),_c('div',{staticClass:\"editphoto_head\",style:({backgroundImage:'url('+_vm.imgUrl+')',backgroundSize:'100% 100%'})})]),_vm._v(\" \"),_c('div',{staticClass:\"editPhoto_txt\"},[_vm._v(\"清晰的正面脸部照片是房东和房客互相认识对方的重要途径。您能想象把自己的房子租给一只猫吗？ 请确保使用能够清楚显示您面部的照片，并确认其中不包含任何您不希望其他房东或房客看到的个人或敏感信息。\")]),_vm._v(\" \"),_c('div',{staticClass:\"editphoto_upload fontweight\"},[_c('el-upload',{staticClass:\"avatar-uploader\",attrs:{\"action\":_vm.api + '/home/Upload/upload',\"data\":_vm.upData,\"show-file-list\":false,\"on-success\":_vm.handleAvatarSuccess,\"before-upload\":_vm.beforeAvatarUpload,\"on-progress\":_vm.uploadProgress}},[(_vm.imgUrl)?_c('img',{staticClass:\"avatar\",attrs:{\"src\":_vm.imgUrl}}):_c('i',{staticClass:\"el-icon-plus avatar-uploader-icon\"})]),_vm._v(\"\\n\\t\\t\\t\\t上传照片\\n\\t\\t\\t\\t\")],1)])])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"data_title\"},[_c('div',{staticClass:\"edit_width\"},[_vm._v(\"个人头像\")])])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-42bba88a\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vux-loader/src/before-template-compiler-loader.js!./node_modules/vux-loader/src/template-loader.js!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/edit/editphoto.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-42bba88a\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../node_modules/vux-loader/src/style-loader.js!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./editphoto.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vux-loader/src/script-loader.js!../../../node_modules/vux-loader/src/script-loader.js!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./editphoto.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vux-loader/src/script-loader.js!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./editphoto.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-42bba88a\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vux-loader/src/before-template-compiler-loader.js!../../../node_modules/vux-loader/src/template-loader.js!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./editphoto.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/edit/editphoto.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}