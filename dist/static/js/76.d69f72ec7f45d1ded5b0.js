webpackJsonp([76],{HPoZ:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("ZKg9"),o=(a.a,{name:"Orderevaluate",data:function(){return{api:this.GLOBAL.baseURL,score:0,dialogImageUrl:"",dialogVisible:!1,tokenData:{token:localStorage.getItem("token")},order_id:"",content:"",activeDate:[],cover_image:[],isComment:!0}},components:{LoadingImg:a.a},methods:{goBack:function(){this.$router.go(-1)},uploadSucess:function(t){this.cover_image.push({image_id:t.data.image_id})},handleRemove:function(t,e){for(var i=0;i<this.cover_image.length;i++)this.cover_image[i].image_id==t.response.data.image_id&&this.cover_image.splice(i,1)},handlePictureCardPreview:function(t){this.dialogImageUrl=t.url,this.dialogVisible=!0},saveComent:function(){var t=this;this.score?this.$http.post(this.api+"/CommentS",{token:localStorage.getItem("token"),flag:1,table_id:this.activeDate.activity_id,content:this.content,score:this.score,image:this.cover_image,order_id:this.order_id}).then(function(e){1==e.data.code?(t.$message({type:"success",message:"评论成功!"}),t.isComment=!1):3==e.data.code?t.$http.post(t.api+"/home/index/token").then(function(e){localStorage.setItem("token",e.data.data),t.saveComent()}):0==e.data.code&&alert(e.data.msg)}):this.$message({type:"info",message:"还没有评分呢!"})},getActive:function(){var t=this;this.$http.post(this.api+"/OrderD",{token:localStorage.getItem("token"),order_id:this.order_id}).then(function(e){1==e.data.code?t.activeDate=e.data.data:3==e.data.code?t.$http.post(t.api+"/home/index/token").then(function(e){localStorage.setItem("token",e.data.data),t.getActive()}):0==e.data.code&&alert(e.data.msg)})}},mounted:function(){this.getActive()},created:function(){this.order_id=this.$route.query.order_id},destroyed:function(){localStorage.removeItem("dis")}}),n={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.activeDate?i("div",{staticStyle:{"background-color":"#fff","text-align":"left",padding:"20px"}},[i("div",{staticStyle:{display:"flex","justify-content":"space-between","line-height":"40px"}},[i("p",[t._v("已完成订单>立即评价")]),t._v(" "),i("el-button",{attrs:{icon:"el-icon-arrow-left",circle:""},on:{click:t.goBack}})],1),t._v(" "),t.isComment?i("div",[i("div",{staticStyle:{"margin-top":"15px","background-color":"#FBFBFB",padding:"20px"}},[i("div",{staticStyle:{display:"flex","justify-content":"flex-start"}},[i("LoadingImg",{staticStyle:{width:"200px",height:"150px",overflow:"hidden"},attrs:{type:"2",src:t.activeDate.cover?t.activeDate.cover.domain+t.activeDate.cover.image_url:""}}),t._v(" "),i("div",{staticStyle:{"margin-left":"15px"}},[t._v("\n          "+t._s(t.activeDate.title)+"\n        ")])],1),t._v(" "),i("div",{staticStyle:{display:"flex","justify-content":"flex-start","margin-top":"30px"}},[i("div",{staticStyle:{"font-weight":"bold"}},[t._v("\n          您的评分\n        ")]),t._v(" "),i("div",{staticStyle:{"margin-left":"18px"}},[i("el-rate",{attrs:{"show-score":"",colors:["#008489","#008489","#008489"],"score-template":"{value}分"},model:{value:t.score,callback:function(e){t.score=e},expression:"score"}})],1)]),t._v(" "),i("div",{staticStyle:{display:"flex","justify-content":"flex-start","margin-top":"30px"}},[i("div",{staticStyle:{"font-weight":"bold"}},[t._v("\n          您的晒图\n        ")]),t._v(" "),i("div",{staticStyle:{"margin-left":"18px"}},[i("el-upload",{attrs:{action:t.api+"/home/Upload/upload",data:t.tokenData,multiple:"","list-type":"picture-card","on-preview":t.handlePictureCardPreview,"on-remove":t.handleRemove,"on-success":t.uploadSucess}},[i("i",{staticClass:"el-icon-plus"})]),t._v(" "),i("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("img",{attrs:{width:"100%",src:t.dialogImageUrl,alt:""}})])],1)]),t._v(" "),i("div",{staticStyle:{display:"flex","justify-content":"flex-start","margin-top":"30px"}},[i("div",{staticStyle:{"font-weight":"bold"}},[t._v("\n          您的评价\n        ")]),t._v(" "),i("div",{staticStyle:{"margin-left":"18px",width:"400px"}},[i("el-input",{attrs:{type:"textarea",autosize:{minRows:5},placeholder:"写点什么吧，您的评价对策划者很有帮助的"},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}})],1)])]),t._v(" "),i("div",{staticStyle:{"margin-top":"20px","padding-left":"100px"}},[i("el-button",{staticStyle:{width:"200px"},attrs:{type:"primary"},on:{click:t.saveComent}},[t._v("发表评论")])],1)]):t._e(),t._v(" "),t.isComment?t._e():i("div",{staticStyle:{"margin-top":"15px","background-color":"#FBFBFB","text-align":"center",padding:"100px 0"}},[t._m(0),t._v(" "),i("div",{staticStyle:{"margin-top":"15px","font-size":"12px",color:"#999999"}},[t._v("您的评价将会显示在该体验活动的评论列表")])])]):t._e()},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticStyle:{display:"flex","justify-content":"center"}},[e("div",{staticStyle:{width:"30px",height:"30px","border-radius":"50%","background-color":"#008489",color:"#fff","font-size":"30px"}},[e("i",{staticClass:"el-icon-check"})]),this._v(" "),e("div",{staticStyle:{"margin-left":"10px","line-height":"30px"}},[this._v("\n        评价成功\n      ")])])}]};var s=i("VU/8")(o,n,!1,function(t){i("hTjT")},"data-v-694145ca",null);e.default=s.exports},hTjT:function(t,e){}});
//# sourceMappingURL=76.d69f72ec7f45d1ded5b0.js.map