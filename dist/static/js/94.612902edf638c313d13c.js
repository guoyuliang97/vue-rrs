webpackJsonp([94],{"4c1R":function(e,t){},AVWw:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s("uTVu"),n=s("DjrJ"),i=(n.a,{name:"message",data:function(){return{api:this.GLOBAL.baseURL,sysMesaage:"",fridendMesage:"",Friendsnotice:"",discussNum:"",zanNum:"",all:"",user_id:""}},watch:{all:function(){this.all||a.a.$emit("nore",!1)},sysMesaage:function(){this.sysMesaage||a.a.$emit("alearAll",1)}},components:{Head:n.a},methods:{reload:function(e){this.user_id=e.data.data[0].user_id},toSystemMessage:function(){this.$router.push({path:"/SystemMessage",query:{information:this.user_id,clearNum:this.sysMesaage}})},toFriendsNotice:function(){this.$router.push("/FriendsNotice")},toFriendMessage:function(){this.Friendsnotice=0,this.all=parseInt(this.all)-parseInt(this.Friendsnotice),this.$router.push("/FriendMessage")},toFriend:function(){this.$router.push("/friend")},getNoread:function(){var e=this;this.$http.post(this.api+"/home/Sysmsg/noread",{token:localStorage.getItem("token")}).then(function(t){if(1==t.data.code){var s=t.data.data;e.sysMesaage=s.sys_count,e.Friendsnotice=s.notice_count,e.fridendMesage=s.chat_count,e.zanNum=s.praise_count,e.discussNum=s.comment_count,e.all=parseInt(s.sys_count)+parseInt(s.notice_count)+parseInt(s.chat_count)+parseInt(s.praise_count)+parseInt(s.comment_count)}else 3==t.data.code?e.$http.post(e.api+"/home/index/token").then(function(t){localStorage.setItem("token",t.data.data),e.getNoread()}):0==t.data.code&&alert(t.data.msg)})},discussMessage:function(){this.all=parseInt(this.all)-parseInt(this.discussNum),this.$router.push("/editevaluation"),this.discussNum=0},zanMessage:function(){this.all=parseInt(this.all)-parseInt(this.zanNum),this.$router.push("/zanMessage"),this.zanNum=0}},mounted:function(){this.getNoread()},created:function(){var e=this;a.a.$on("reduce",function(t){e.sysMesaage=parseInt(e.sysMesaage)-t,e.all=parseInt(e.all)-t}),a.a.$on("friendN",function(t){e.fridendMesage=parseInt(e.fridendMesage)-t,e.all=parseInt(e.all)-t}),a.a.$on("clearAll",function(t){e.all=parseInt(e.all)-parseInt(e.sysMesaage),e.sysMesaage=0})}}),o={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("el-container",[s("el-header",[s("Head",{attrs:{type:"message"},on:{reload:e.reload}})],1),e._v(" "),s("el-container",{staticStyle:{width:"1080px",margin:"50px auto"}},[s("el-aside",{attrs:{width:"200px"}},[s("h2",[e._v("我的消息")]),e._v(" "),s("div",{staticStyle:{"margin-top":"20px"}},[s("el-badge",{staticClass:"item"},[s("el-button",{on:{click:e.toFriend}},[e._v("我的好友")])],1),e._v(" "),s("br"),e._v(" "),s("el-badge",{staticClass:"item",attrs:{value:e.sysMesaage,hidden:!e.sysMesaage,max:99}},[s("el-button",{on:{click:e.toSystemMessage}},[e._v("系统消息")])],1),e._v(" "),s("br"),e._v(" "),s("el-badge",{staticClass:"item",attrs:{value:e.Friendsnotice,hidden:!e.Friendsnotice,max:99}},[s("el-button",{on:{click:e.toFriendsNotice}},[e._v("好友通知")])],1),e._v(" "),s("br"),e._v(" "),s("el-badge",{staticClass:"item",attrs:{value:e.fridendMesage,hidden:!e.fridendMesage,max:99}},[s("el-button",{on:{click:e.toFriendMessage}},[e._v("好友消息")])],1),e._v(" "),s("br"),e._v(" "),s("el-badge",{staticClass:"item",attrs:{value:e.discussNum,hidden:!e.discussNum,max:99}},[s("el-button",{on:{click:e.discussMessage}},[e._v("评价")])],1),e._v(" "),s("br"),e._v(" "),s("el-badge",{staticClass:"item",attrs:{value:e.zanNum,hidden:!e.zanNum,max:99}},[s("el-button",{on:{click:e.zanMessage}},[e._v("赞")])],1)],1)]),e._v(" "),s("el-main",[s("router-view")],1)],1)],1)],1)},staticRenderFns:[]};var r=s("VU/8")(i,o,!1,function(e){s("4c1R")},"data-v-4ca154d9",null);t.default=r.exports}});
//# sourceMappingURL=94.612902edf638c313d13c.js.map